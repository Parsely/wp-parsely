!function(){var e={8552:function(e,t,n){var r=n(852)(n(5639),"DataView");e.exports=r},1989:function(e,t,n){var r=n(1789),i=n(401),s=n(7667),o=n(1327),a=n(1866);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},8407:function(e,t,n){var r=n(7040),i=n(4125),s=n(2117),o=n(7518),a=n(4705);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},7071:function(e,t,n){var r=n(852)(n(5639),"Map");e.exports=r},3369:function(e,t,n){var r=n(4785),i=n(1285),s=n(6e3),o=n(9916),a=n(5265);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,e.exports=l},3818:function(e,t,n){var r=n(852)(n(5639),"Promise");e.exports=r},8525:function(e,t,n){var r=n(852)(n(5639),"Set");e.exports=r},8668:function(e,t,n){var r=n(3369),i=n(619),s=n(2385);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,e.exports=o},6384:function(e,t,n){var r=n(8407),i=n(7465),s=n(3779),o=n(7599),a=n(4758),l=n(4309);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=l,e.exports=c},2705:function(e,t,n){var r=n(5639).Symbol;e.exports=r},1149:function(e,t,n){var r=n(5639).Uint8Array;e.exports=r},577:function(e,t,n){var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s}},4636:function(e,t,n){var r=n(2545),i=n(5694),s=n(1469),o=n(4144),a=n(5776),l=n(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=s(e),u=!n&&i(e),p=!n&&!u&&o(e),d=!n&&!u&&!p&&l(e),f=n||u||p||d,h=f?r(e.length,String):[],y=h.length;for(var v in e)!t&&!c.call(e,v)||f&&("length"==v||p&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,y))||h.push(v);return h}},2488:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2908:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8470:function(e,t,n){var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},8866:function(e,t,n){var r=n(2488),i=n(1469);e.exports=function(e,t,n){var s=t(e);return i(e)?s:r(s,n(e))}},4239:function(e,t,n){var r=n(2705),i=n(9607),s=n(2333),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):s(e)}},9454:function(e,t,n){var r=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},939:function(e,t,n){var r=n(2492),i=n(7005);e.exports=function e(t,n,s,o,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,s,o,e,a))}},2492:function(e,t,n){var r=n(6384),i=n(7114),s=n(8351),o=n(6096),a=n(4160),l=n(1469),c=n(4144),u=n(6719),p="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,y,v,g){var _=l(e),w=l(t),b=_?d:a(e),m=w?d:a(t),x=(b=b==p?f:b)==f,j=(m=m==p?f:m)==f,S=b==m;if(S&&c(e)){if(!c(t))return!1;_=!0,x=!1}if(S&&!x)return g||(g=new r),_||u(e)?i(e,t,n,y,v,g):s(e,t,b,n,y,v,g);if(!(1&n)){var k=x&&h.call(e,"__wrapped__"),P=j&&h.call(t,"__wrapped__");if(k||P){var T=k?e.value():e,E=P?t.value():t;return g||(g=new r),v(T,E,n,y,g)}}return!!S&&(g||(g=new r),o(e,t,n,y,v,g))}},8458:function(e,t,n){var r=n(3560),i=n(5346),s=n(3218),o=n(346),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,p=c.hasOwnProperty,d=RegExp("^"+u.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(r(e)?d:a).test(o(e))}},8749:function(e,t,n){var r=n(4239),i=n(1780),s=n(7005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return s(e)&&i(e.length)&&!!o[r(e)]}},280:function(e,t,n){var r=n(5726),i=n(6916),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2545:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1717:function(e){e.exports=function(e){return function(t){return e(t)}}},4757:function(e){e.exports=function(e,t){return e.has(t)}},4429:function(e,t,n){var r=n(5639)["__core-js_shared__"];e.exports=r},7114:function(e,t,n){var r=n(8668),i=n(2908),s=n(4757);e.exports=function(e,t,n,o,a,l){var c=1&n,u=e.length,p=t.length;if(u!=p&&!(c&&p>u))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var h=-1,y=!0,v=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++h<u;){var g=e[h],_=t[h];if(o)var w=c?o(_,g,h,t,e,l):o(g,_,h,e,t,l);if(void 0!==w){if(w)continue;y=!1;break}if(v){if(!i(t,(function(e,t){if(!s(v,t)&&(g===e||a(g,e,n,o,l)))return v.push(t)}))){y=!1;break}}else if(g!==_&&!a(g,_,n,o,l)){y=!1;break}}return l.delete(e),l.delete(t),y}},8351:function(e,t,n){var r=n(2705),i=n(1149),s=n(7813),o=n(7114),a=n(8776),l=n(1814),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,p,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var h=1&r;if(f||(f=l),e.size!=t.size&&!h)return!1;var y=d.get(e);if(y)return y==t;r|=2,d.set(e,t);var v=o(f(e),f(t),r,c,p,d);return d.delete(e),v;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},6096:function(e,t,n){var r=n(8234),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,o,a){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var p=u;p--;){var d=c[p];if(!(l?d in t:i.call(t,d)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var y=!0;a.set(e,t),a.set(t,e);for(var v=l;++p<u;){var g=e[d=c[p]],_=t[d];if(s)var w=l?s(_,g,d,t,e,a):s(g,_,d,e,t,a);if(!(void 0===w?g===_||o(g,_,n,s,a):w)){y=!1;break}v||(v="constructor"==d)}if(y&&!v){var b=e.constructor,m=t.constructor;b==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(y=!1)}return a.delete(e),a.delete(t),y}},1957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:function(e,t,n){var r=n(8866),i=n(9551),s=n(3674);e.exports=function(e){return r(e,s,i)}},5050:function(e,t,n){var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:function(e,t,n){var r=n(8458),i=n(7801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},9607:function(e,t,n){var r=n(2705),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(t?e[a]=n:delete e[a]),i}},9551:function(e,t,n){var r=n(4963),i=n(479),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return s.call(e,t)})))}:i;e.exports=a},4160:function(e,t,n){var r=n(8552),i=n(7071),s=n(3818),o=n(8525),a=n(577),l=n(4239),c=n(346),u="[object Map]",p="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",y=c(r),v=c(i),g=c(s),_=c(o),w=c(a),b=l;(r&&b(new r(new ArrayBuffer(1)))!=h||i&&b(new i)!=u||s&&b(s.resolve())!=p||o&&b(new o)!=d||a&&b(new a)!=f)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case y:return h;case v:return u;case g:return p;case _:return d;case w:return f}return t}),e.exports=b},7801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},1789:function(e,t,n){var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:function(e,t,n){var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:function(e,t,n){var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},1866:function(e,t,n){var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7019:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:function(e,t,n){var r,i=n(4429),s=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!s&&s in e}},5726:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:function(e){e.exports=function(){this.__data__=[],this.size=0}},4125:function(e,t,n){var r=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},2117:function(e,t,n){var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:function(e,t,n){var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:function(e,t,n){var r=n(8470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4785:function(e,t,n){var r=n(1989),i=n(8407),s=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||i),string:new r}}},1285:function(e,t,n){var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:function(e,t,n){var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:function(e,t,n){var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:function(e,t,n){var r=n(5050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},8776:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4536:function(e,t,n){var r=n(852)(Object,"create");e.exports=r},6916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},1167:function(e,t,n){e=n.nmd(e);var r=n(1957),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,o=s&&s.exports===i&&r.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=a},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},5639:function(e,t,n){var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();e.exports=s},619:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:function(e){e.exports=function(e){return this.__data__.has(e)}},1814:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},7465:function(e,t,n){var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:function(e){e.exports=function(e){return this.__data__.get(e)}},4758:function(e){e.exports=function(e){return this.__data__.has(e)}},4309:function(e,t,n){var r=n(8407),i=n(7071),s=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(e,t),this.size=n.size,this}},346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7813:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:function(e,t,n){var r=n(9454),i=n(7005),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},1469:function(e){var t=Array.isArray;e.exports=t},8612:function(e,t,n){var r=n(3560),i=n(1780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},4144:function(e,t,n){e=n.nmd(e);var r=n(5639),i=n(5062),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},8446:function(e,t,n){var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:function(e,t,n){var r=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},6719:function(e,t,n){var r=n(8749),i=n(1717),s=n(1167),o=s&&s.isTypedArray,a=o?i(o):r;e.exports=a},3674:function(e,t,n){var r=n(4636),i=n(280),s=n(8612);e.exports=function(e){return s(e)?r(e):i(e)}},479:function(e){e.exports=function(){return[]}},5062:function(e){e.exports=function(){return!1}},5251:function(e,t,n){"use strict";var r=n(9196),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},5893:function(e,t,n){"use strict";e.exports=n(5251)},9196:function(e){"use strict";e.exports=window.React}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r](s,s.exports,n),s.loaded=!0,s.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";n.d({},{W:function(){return _t}});var e,t,r,i=n(5893),s=window.wp.components,o=window.wp.coreData,a=window.wp.data,l=window.wp.editPost,c=window.wp.editor,u=window.wp.element,p=window.wp.i18n,d=window.wp.plugins,f=function(){function e(){this._tkq=[],this.isLoaded=!1,this.isEnabled=!1,"undefined"!=typeof wpParselyTracksTelemetry&&(this.isEnabled=!0,this.loadTrackingLibrary())}return e.getInstance=function(){return window.wpParselyTelemetryInstance||Object.defineProperty(window,"wpParselyTelemetryInstance",{value:new e,writable:!1,configurable:!1,enumerable:!1}),window.wpParselyTelemetryInstance},e.prototype.loadTrackingLibrary=function(){var e=this,t=document.createElement("script");t.async=!0,t.src="//stats.wp.com/w.js",t.onload=function(){e.isLoaded=!0,e._tkq=window._tkq||[]},document.head.appendChild(t)},e.trackEvent=function(t,n){return void 0===n&&(n={}),r=this,i=void 0,o=function(){var r;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(i){switch(i.label){case 0:return(r=e.getInstance()).isTelemetryEnabled()?[4,e.waitUntilLoaded()]:[2];case 1:return i.sent(),r.trackEvent(t,n),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,a)}l((o=o.apply(r,i||[])).next())}));var r,i,s,o},e.waitUntilLoaded=function(){return new Promise((function(t,n){var r=e.getInstance();if(r.isTelemetryEnabled())if(r.isLoaded)t();else var i=0,s=setInterval((function(){r.isLoaded&&(clearInterval(s),t()),(i+=100)>=1e4&&(clearInterval(s),n("Telemetry library not loaded"))}),100);else n("Telemetry not enabled")}))},e.prototype.trackEvent=function(t,n){var r;this.isLoaded?(0!==t.indexOf(e.TRACKS_PREFIX)&&(t=e.TRACKS_PREFIX+t),this.isEventNameValid(t)?(n=this.prepareProperties(n),null===(r=this._tkq)||void 0===r||r.push(["recordEvent",t,n])):console.error("Error tracking event: Invalid event name")):console.error("Error tracking event: Telemetry not loaded")},e.prototype.isTelemetryEnabled=function(){return this.isEnabled},e.prototype.isProprietyValid=function(t){return e.PROPERTY_REGEX.test(t)},e.prototype.isEventNameValid=function(t){return e.EVENT_NAME_REGEX.test(t)},e.prototype.prepareProperties=function(e){return(e=this.sanitizeProperties(e)).parsely_version=wpParselyTracksTelemetry.version,wpParselyTracksTelemetry.user&&(e._ut=wpParselyTracksTelemetry.user.type,e._ui=wpParselyTracksTelemetry.user.id),wpParselyTracksTelemetry.vipgo_env&&(e.vipgo_env=wpParselyTracksTelemetry.vipgo_env),this.sanitizeProperties(e)},e.prototype.sanitizeProperties=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){t.isProprietyValid(r)&&(n[r]=e[r])})),n},e.TRACKS_PREFIX="wpparsely_",e.EVENT_NAME_REGEX=/^(([a-z0-9]+)_){2}([a-z0-9_]+)$/,e.PROPERTY_REGEX=/^[a-z_][a-z0-9_]*$/,e}(),h=(f.trackEvent,function(e){var t=e.text,n=void 0===t?(0,p.__)("Beta","wp-parsely"):t,r=e.color,s=void 0===r?"var(--parsely-green)":r,o=e.fontSize,a={backgroundColor:s,fontSize:void 0===o?"0.75rem":o};return(0,i.jsx)("div",{className:"wp-parsely-beta-badge",style:a,children:n})}),y=(0,u.forwardRef)((function({icon:e,size:t=24,...n},r){return(0,u.cloneElement)(e,{width:t,height:t,...n,ref:r})})),v=n(9196),g=window.wp.primitives,_=(0,v.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,v.createElement)(g.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})),w=function(){return(0,i.jsxs)(s.SVG,{"aria-hidden":"true",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,i.jsx)(s.G,{transform:"matrix(1, 0, 0, 1, 1.7763568394002505e-15, 0)"}),(0,i.jsx)(s.Path,{d:"M 16.693 6.167 A 4.541 4.541 0 0 1 12.152 10.708 A 4.541 4.541 0 0 1 7.611 6.167 A 4.541 4.541 0 0 1 12.152 1.626 A 4.541 4.541 0 0 1 16.693 6.167 Z",style:{fill:"rgba(216, 216, 216, 0)",fillOpacity:0,strokeWidth:"2.5px",stroke:"rgb(0, 0, 0)"}}),(0,i.jsx)(s.Path,{d:"M 3.016 23.76 L 3.0135 22.4385 C 3.0109999999999997 21.117 3.0060000000000002 18.474 3.3204999999999996 16.911 C 3.635 15.347999999999999 4.268999999999999 14.865 7.068666666666666 14.6235 C 9.868333333333332 14.382 14.833666666666666 14.382 17.585833333333333 14.658 C 20.337999999999997 14.934 20.877 15.485999999999999 21.1465 17.0435 C 21.416 18.601 21.416 21.164 21.416 22.4455 L 21.416 23.727",style:{fillOpacity:0,fill:"rgb(255, 255, 255)",strokeWidth:"2.5px",stroke:"rgb(0, 0, 0)"}})]})},b={journalist:{label:(0,p.__)("Journalist","wp-parsely"),emoji:"üì∞"},editorialWriter:{label:(0,p.__)("Editorial Writer","wp-parsely"),emoji:"‚úçÔ∏è"},investigativeReporter:{label:(0,p.__)("Investigative Reporter","wp-parsely"),emoji:"üïµÔ∏è"},techAnalyst:{label:(0,p.__)("Tech Analyst","wp-parsely"),emoji:"üíª"},businessAnalyst:{label:(0,p.__)("Business Analyst","wp-parsely"),emoji:"üìà"},culturalCommentator:{label:(0,p.__)("Cultural Commentator","wp-parsely"),emoji:"üåç"},scienceCorrespondent:{label:(0,p.__)("Science Correspondent","wp-parsely"),emoji:"üî¨"},politicalAnalyst:{label:(0,p.__)("Political Analyst","wp-parsely"),emoji:"üèõÔ∏è"},healthWellnessAdvocate:{label:(0,p.__)("Health and Wellness Advocate","wp-parsely"),emoji:"üçè"},environmentalJournalist:{label:(0,p.__)("Environmental Journalist","wp-parsely"),emoji:"üå≥"},custom:{label:(0,p.__)("Use a custom persona","wp-parsely"),emoji:"üîß"}},m=Object.keys(b),x=function(e){return"custom"===e||""===e?b.custom.label:j(e)?e:b[e].label},j=function(e){return!m.includes(e)||"custom"===e},S=function(e){var t=e.value,n=e.onChange,r=(0,u.useState)(""),o=r[0],a=r[1];return(0,i.jsx)("div",{className:"parsely-persona-selector-custom",children:(0,i.jsx)(s.TextControl,{value:o||t,onChange:function(e){n(e),a(e)},help:(0,p.__)("Enter a custom persona","wp-parsely")})})},k=function(e){var t=e.persona,n=e.label,r=void 0===n?(0,p.__)("Select a persona","wp-parsely"):n,o=e.onChange,a=e.onDropdownChange,l=e.disabled,c=void 0!==l&&l,u=e.allowCustom,d=void 0!==u&&u;return(0,i.jsxs)(s.Disabled,{isDisabled:c,children:[(0,i.jsx)(s.DropdownMenu,{label:(0,p.__)("Persona","wp-parsely"),icon:w,className:"parsely-persona-selector-dropdown"+(c?" is-disabled":""),popoverProps:{className:"wp-parsely-popover"},toggleProps:{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"parsely-persona-selector-label",children:r}),(0,i.jsx)(y,{icon:_})]})},children:function(e){var n=e.onClose;return(0,i.jsx)(s.MenuGroup,{label:(0,p.__)("Select a persona","wp-parsely"),children:(0,i.jsx)(i.Fragment,{children:m.map((function(e){if(!d&&"custom"===e)return null;var r=b[e];return(0,i.jsxs)(s.MenuItem,{isSelected:e===t,className:e===t?"is-selected":"",role:"menuitemradio",onClick:function(){null==a||a(e),o(e),n()},children:[r.emoji," ",r.label]},e)}))})})}}),d&&j(t)&&(0,i.jsx)(S,{onChange:function(e){o(""!==e?e:"custom")},value:"custom"===t?"":t})]})},P=(0,v.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,v.createElement)(g.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})),T={neutral:{label:(0,p.__)("Neutral","wp-parsely"),emoji:"üòê"},formal:{label:(0,p.__)("Formal","wp-parsely"),emoji:"üé©"},humorous:{label:(0,p.__)("Humorous","wp-parsely"),emoji:"üòÇ"},confident:{label:(0,p.__)("Confident","wp-parsely"),emoji:"üòé"},provocative:{label:(0,p.__)("Provocative","wp-parsely"),emoji:"üòà"},serious:{label:(0,p.__)("Serious","wp-parsely"),emoji:"üßê"},inspirational:{label:(0,p.__)("Inspirational","wp-parsely"),emoji:"‚ú®"},skeptical:{label:(0,p.__)("Skeptical","wp-parsely"),emoji:"ü§®"},conversational:{label:(0,p.__)("Conversational","wp-parsely"),emoji:"üí¨"},analytical:{label:(0,p.__)("Analytical","wp-parsely"),emoji:"ü§ì"},custom:{label:(0,p.__)("Use a custom tone","wp-parsely"),emoji:"üîß"}},E=Object.keys(T),C=function(e){return"custom"===e||""===e?T.custom.label:O(e)?e:T[e].label},O=function(e){return!E.includes(e)||"custom"===e},L=function(e){var t=e.value,n=e.onChange,r=(0,u.useState)(""),o=r[0],a=r[1];return(0,i.jsx)("div",{className:"parsely-tone-selector-custom",children:(0,i.jsx)(s.TextControl,{value:o||t,onChange:function(e){n(e),a(e)},help:(0,p.__)("Enter a custom tone","wp-parsely")})})},A=function(e){var t=e.tone,n=e.label,r=void 0===n?(0,p.__)("Select a tone","wp-parsely"):n,o=e.onChange,a=e.onDropdownChange,l=e.disabled,c=void 0!==l&&l,u=e.allowCustom,d=void 0!==u&&u;return(0,i.jsxs)(s.Disabled,{isDisabled:c,children:[(0,i.jsx)(s.DropdownMenu,{label:(0,p.__)("Tone","wp-parsely"),icon:P,className:"parsely-tone-selector-dropdown"+(c?" is-disabled":""),popoverProps:{className:"wp-parsely-popover"},toggleProps:{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"parsely-tone-selector-label",children:r}),(0,i.jsx)(y,{icon:_})]})},children:function(e){var n=e.onClose;return(0,i.jsx)(s.MenuGroup,{label:(0,p.__)("Select a tone","wp-parsely"),children:(0,i.jsx)(i.Fragment,{children:E.map((function(e){if(!d&&"custom"===e)return null;var r=T[e];return(0,i.jsxs)(s.MenuItem,{isSelected:e===t,className:e===t?"is-selected":"",role:"menuitemradio",onClick:function(){null==a||a(e),o(e),n()},children:[r.emoji," ",r.label]},e)}))})})}}),d&&O(t)&&(0,i.jsx)(L,{onChange:function(e){o(""!==e?e:"custom")},value:"custom"===t?"":t})]})},N=n(8446),R=n.n(N),I=window.wp.apiFetch,B=n.n(I),M=(0,u.createRef)(),F=function(e,t,n){void 0===n&&(n=void 0);var r=(0,u.useRef)(!0);(0,u.useEffect)((function(){r.current?r.current=!1:R()(M.current,t)||(M.current=t,B()({path:"/wp-parsely/v1/user-meta/content-helper/"+e,method:"PUT",data:t}))}),null!=n?n:Object.values(t))},D=function(e){var t=e.size,n=void 0===t?24:t,r=e.className,o=void 0===r?"wp-parsely-icon":r;return(0,i.jsxs)(s.SVG,{className:o,height:n,viewBox:"0 0 60 65",width:n,xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)(s.Path,{fill:"#5ba745",d:"M23.72,51.53c0-.18,0-.34-.06-.52a13.11,13.11,0,0,0-2.1-5.53A14.74,14.74,0,0,0,19.12,43c-.27-.21-.5-.11-.51.22l-.24,3.42c0,.33-.38.35-.49,0l-1.5-4.8a1.4,1.4,0,0,0-.77-.78,23.91,23.91,0,0,0-3.1-.84c-1.38-.24-3.39-.39-3.39-.39-.34,0-.45.21-.25.49l2.06,3.76c.2.27,0,.54-.29.33l-4.51-3.6a3.68,3.68,0,0,0-2.86-.48c-1,.16-2.44.46-2.44.46a.68.68,0,0,0-.39.25.73.73,0,0,0-.14.45S.41,43,.54,44a3.63,3.63,0,0,0,1.25,2.62L6.48,50c.28.2.09.49-.23.37l-4.18-.94c-.32-.12-.5,0-.4.37,0,0,.69,1.89,1.31,3.16a24,24,0,0,0,1.66,2.74,1.34,1.34,0,0,0,1,.52l5,.13c.33,0,.41.38.1.48L7.51,58c-.31.1-.34.35-.07.55a14.29,14.29,0,0,0,3.05,1.66,13.09,13.09,0,0,0,5.9.5,25.13,25.13,0,0,0,4.34-1,9.55,9.55,0,0,1-.08-1.2,9.32,9.32,0,0,1,3.07-6.91"}),(0,i.jsx)(s.Path,{fill:"#5ba745",d:"M59.7,41.53a.73.73,0,0,0-.14-.45.68.68,0,0,0-.39-.25s-1.43-.3-2.44-.46a3.64,3.64,0,0,0-2.86.48l-4.51,3.6c-.26.21-.49-.06-.29-.33l2.06-3.76c.2-.28.09-.49-.25-.49,0,0-2,.15-3.39.39a23.91,23.91,0,0,0-3.1.84,1.4,1.4,0,0,0-.77.78l-1.5,4.8c-.11.32-.48.3-.49,0l-.24-3.42c0-.33-.24-.43-.51-.22a14.74,14.74,0,0,0-2.44,2.47A13.11,13.11,0,0,0,36.34,51c0,.18,0,.34-.06.52a9.26,9.26,0,0,1,3,8.1,24.1,24.1,0,0,0,4.34,1,13.09,13.09,0,0,0,5.9-.5,14.29,14.29,0,0,0,3.05-1.66c.27-.2.24-.45-.07-.55l-3.22-1.17c-.31-.1-.23-.47.1-.48l5-.13a1.38,1.38,0,0,0,1-.52A24.6,24.6,0,0,0,57,52.92c.61-1.27,1.31-3.16,1.31-3.16.1-.33-.08-.49-.4-.37l-4.18.94c-.32.12-.51-.17-.23-.37l4.69-3.34A3.63,3.63,0,0,0,59.46,44c.13-1,.24-2.47.24-2.47"}),(0,i.jsx)(s.Path,{fill:"#5ba745",d:"M46.5,25.61c0-.53-.35-.72-.8-.43l-4.86,2.66c-.45.28-.56-.27-.23-.69l4.66-6.23a2,2,0,0,0,.28-1.68,36.51,36.51,0,0,0-2.19-4.89,34,34,0,0,0-2.81-3.94c-.33-.41-.74-.35-.91.16l-2.28,5.68c-.16.5-.6.48-.59-.05l.28-8.93a2.54,2.54,0,0,0-.66-1.64S35,4.27,33.88,3.27,30.78.69,30.78.69a1.29,1.29,0,0,0-1.54,0s-1.88,1.49-3.12,2.59-2.48,2.35-2.48,2.35A2.5,2.5,0,0,0,23,7.27l.27,8.93c0,.53-.41.55-.58.05l-2.29-5.69c-.17-.5-.57-.56-.91-.14a35.77,35.77,0,0,0-3,4.2,35.55,35.55,0,0,0-2,4.62,2,2,0,0,0,.27,1.67l4.67,6.24c.33.42.23,1-.22.69l-4.87-2.66c-.45-.29-.82-.1-.82.43a18.6,18.6,0,0,0,.83,5.07,20.16,20.16,0,0,0,5.37,7.77c3.19,3,5.93,7.8,7.45,11.08A9.6,9.6,0,0,1,30,49.09a9.31,9.31,0,0,1,2.86.45c1.52-3.28,4.26-8.11,7.44-11.09a20.46,20.46,0,0,0,5.09-7,19,19,0,0,0,1.11-5.82"}),(0,i.jsx)(s.Path,{fill:"#5ba745",d:"M36.12,58.44A6.12,6.12,0,1,1,30,52.32a6.11,6.11,0,0,1,6.12,6.12"})]})};!function(e){e.Minutes10="10m",e.Hour="1h",e.Hours2="2h",e.Hours4="4h",e.Hours24="24h",e.Days7="7d",e.Days30="30d"}(e||(e={})),function(e){e.Views="views",e.AvgEngaged="avg_engaged"}(t||(t={})),function(e){e.Author="author",e.Section="section",e.Tag="tag",e.Unavailable="unavailable"}(r||(r={}));var z=function(e,t){return Object.values(t).includes(e)};function V(e,t){void 0===t&&(t=!1);var n=parseInt(e,10),r=e.charAt(e.length-1),i=(0,p.__)("Unknown Period","wp-parsely");switch(r){case"m":if(1===n){i=(0,p.__)("Last Minute","wp-parsely");break}i=(0,p.sprintf)(/* translators: 1: Number of minutes */(0,p._n)("Last %1$d Minute","Last %1$d Minutes",n,"wp-parsely"),n);break;case"h":if(1===n){i=(0,p.__)("Last Hour","wp-parsely");break}i=(0,p.sprintf)(/* translators: 1: Number of hours */(0,p._n)("Last %1$d Hour","Last %1$d Hours",n,"wp-parsely"),n);break;case"d":if(1===n){i=(0,p.__)("Last Day","wp-parsely");break}i=(0,p.sprintf)(/* translators: 1: Number of days */(0,p._n)("Last %1$d Day","Last %1$d Days",n,"wp-parsely"),n)}return t?i.toLocaleLowerCase():i}function G(e){switch(e){case t.Views:return(0,p.__)("Page Views","wp-parsely");case t.AvgEngaged:return(0,p.__)("Avg. Time","wp-parsely");default:return(0,p.__)("Unknown Metric","wp-parsely")}}var U=function(e){void 0===e&&(e=null);var t="";(null==e?void 0:e.children)&&(t=e.children);var n="content-helper-error-message";return(null==e?void 0:e.className)&&(n+=" "+e.className),(0,i.jsx)("div",{className:n,"data-testid":null==e?void 0:e.testId,dangerouslySetInnerHTML:{__html:t}})},H=function(e){return void 0===e&&(e=null),(0,i.jsx)(U,{className:null==e?void 0:e.className,testId:"empty-credentials-message",children:window.wpParselyEmptyCredentialsMessage})},W=function(){return W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},W.apply(this,arguments)},$=function(e,t){var n=e.children;return void 0===t&&(t=null),window.wpParselyEmptyCredentialsMessage?(0,i.jsx)(H,W({},t)):(0,i.jsx)(i.Fragment,{children:n})},q=(0,v.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,v.createElement)(g.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,v.createElement)(g.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})),K=window.wp.blockEditor,Y=window.wp.compose,Q=window.wp.hooks,X=function(){return X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},X.apply(this,arguments)},Z=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},J={isLoading:!1,fullContent:!1,suggestedLinks:null,error:null,sidebarSettings:null,crossLinkerSettings:{},overlayBlocks:[]},ee=(0,a.createReduxStore)("wp-parsely/cross-linker",{initialState:J,reducer:function(e,t){switch(void 0===e&&(e=J),t.type){case"SET_LOADING":return X(X({},e),{isLoading:t.isLoading});case"SET_OVERLAY_BLOCKS":return X(X({},e),{overlayBlocks:t.overlayBlocks});case"SET_ERROR":return X(X({},e),{error:t.error});case"ADD_OVERLAY_BLOCK":return X(X({},e),{overlayBlocks:Z(Z([],e.overlayBlocks,!0),[t.block],!1)});case"REMOVE_OVERLAY_BLOCK":return"all"===t.block?X(X({},e),{overlayBlocks:[]}):X(X({},e),{overlayBlocks:e.overlayBlocks.filter((function(e){return e!==t.block}))});case"SET_FULL_CONTENT":return X(X({},e),{fullContent:t.fullContent});case"SET_SETTINGS":return X(X({},e),{sidebarSettings:t.sidebarSettings});case"SET_CROSSLINKER_SETTINGS":return X(X({},e),{crossLinkerSettings:X(X({},e.crossLinkerSettings),t.crossLinkerSettings)});case"SET_SUGGESTED_LINKS":return X(X({},e),{suggestedLinks:t.suggestedLinks});default:return e}},actions:{setLoading:function(e){return{type:"SET_LOADING",isLoading:e}},setOverlayBlocks:function(e){return{type:"SET_OVERLAY_BLOCKS",overlayBlocks:e}},setError:function(e){return{type:"SET_ERROR",error:e}},addOverlayBlock:function(e){return{type:"ADD_OVERLAY_BLOCK",block:e}},removeOverlayBlock:function(e){return{type:"REMOVE_OVERLAY_BLOCK",block:e}},setFullContent:function(e){return{type:"SET_FULL_CONTENT",fullContent:e}},setSettings:function(e){return{type:"SET_SETTINGS",sidebarSettings:e}},setMaxLinkWords:function(e){return{type:"SET_CROSSLINKER_SETTINGS",crossLinkerSettings:{maxLinkWords:e}}},setMaxLinks:function(e){return{type:"SET_CROSSLINKER_SETTINGS",crossLinkerSettings:{maxLinksPerPost:e}}},setSettingsOpen:function(e){return{type:"SET_CROSSLINKER_SETTINGS",crossLinkerSettings:{settingsOpen:e}}},setSuggestedLinks:function(e){return{type:"SET_SUGGESTED_LINKS",suggestedLinks:e}}},selectors:{isLoading:function(e){return e.isLoading},isFullContent:function(e){return e.fullContent},getError:function(e){return e.error},getOverlayBlocks:function(e){return e.overlayBlocks},getSettings:function(e){return e.sidebarSettings},areSettingsOpen:function(e){var t,n,r;return null!==(r=null!==(t=e.crossLinkerSettings.settingsOpen)&&void 0!==t?t:null===(n=e.sidebarSettings)||void 0===n?void 0:n.CrossLinksSettingsOpen)&&void 0!==r&&r},getMaxLinkWords:function(e){var t,n,r;return null!==(r=null!==(t=e.crossLinkerSettings.maxLinkWords)&&void 0!==t?t:null===(n=e.sidebarSettings)||void 0===n?void 0:n.CrossLinksMaxLinkWords)&&void 0!==r?r:oe},getMaxLinks:function(e){var t,n,r;return null!==(r=null!==(t=e.crossLinkerSettings.maxLinksPerPost)&&void 0!==t?t:null===(n=e.sidebarSettings)||void 0===n?void 0:n.CrossLinksMaxLinks)&&void 0!==r?r:se},getSuggestedLinks:function(e){return e.suggestedLinks}}});(0,a.register)(ee);var te,ne,re=function(e){var t=e.selectedBlockClientId,n=e.label,r=(0,u.useState)(document.createElement("div"))[0];return r.className="wp-parsely-block-overlay","all"===t&&(r.className+=" full-content-overlay"),r.onclick=function(e){e.stopPropagation(),e.stopImmediatePropagation(),"all"!==t&&((0,a.dispatch)("core/block-editor").selectBlock(t,-1),r.ownerDocument.activeElement.blur())},(0,u.useEffect)((function(){if(t){if("all"===t){var e=document.querySelector(".interface-navigable-region.interface-interface-skeleton__content");return null==e||e.appendChild(r),null==e||e.setAttribute("style","overflow: hidden"),r.style.top=(null==e?void 0:e.scrollTop)+"px",function(){(null==e?void 0:e.contains(r))&&e.removeChild(r),null==e||e.setAttribute("style",""),r.style.top=""}}var n=document.querySelector('[data-block="'.concat(t,'"]'));return null==n||n.setAttribute("contenteditable","false"),null==n||n.setAttribute("aria-disabled","true"),null==n||n.appendChild(r),function(){null==n||n.setAttribute("contenteditable","true"),null==n||n.removeAttribute("aria-disabled"),(null==n?void 0:n.contains(r))&&n.removeChild(r)}}})),(0,u.createPortal)((0,i.jsxs)("div",{className:"wp-parsely-block-overlay-label",children:[(0,i.jsx)(s.Spinner,{}),(0,i.jsx)("span",{children:n})]}),r)},ie=function(){return ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ie.apply(this,arguments)},se=10,oe=4,ae=(0,Y.createHigherOrderComponent)((function(e){return function(t){var n=(0,a.useSelect)((function(e){var t;return{settings:null!==(t=(0,e(ee).getSettings)())&&void 0!==t?t:ie(ie({},_t()),{CrossLinksOpen:!0})}}),[]).settings,r=(0,a.useDispatch)(ee).setSettings;if(F("editor-sidebar-settings",n),"core/paragraph"!==t.name||!1===t.isSelected)return(0,i.jsx)(e,ie({},t));var o=function(e,t){var i;r(ie(ie({},n),((i={})[e]=t,i)))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e,ie({},t)),(0,i.jsx)(K.InspectorControls,{group:"list",children:(0,i.jsx)(s.PanelBody,{title:"Smart Linking",initialOpen:n.CrossLinksOpen,className:"wp-parsely-panel wp-parsely-smart-linking-panel",icon:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D,{})," ",(0,i.jsx)(h,{})]}),onToggle:function(e){o("CrossLinksOpen",e),f.trackEvent("cross_linker_block_inspector_panel_toggled",{open:e})},children:(0,i.jsx)($,{children:(0,i.jsx)(ge,{selectedBlockClientId:t.clientId,context:he.BlockInspector,onSettingChange:o,sidebarSettings:n})})})})]})}}),"withInspectorControl"),le=function(e){var t=e.disabled,n=void 0!==t&&t,r=e.onSettingChange,o=(0,a.useSelect)((function(e){var t=e(ee),n=t.getMaxLinkWords,r=t.getMaxLinks,i=t.areSettingsOpen;return{maxLinks:r(),maxLinkWords:n(),settingsOpen:i()}}),[]),l=o.maxLinks,c=o.maxLinkWords,u=o.settingsOpen,d=(0,a.useDispatch)(ee),h=d.setMaxLinks,y=d.setMaxLinkWords,v=d.setSettingsOpen;return(0,i.jsxs)("div",{className:"parsely-panel-settings",children:[(0,i.jsxs)("div",{className:"parsely-panel-settings-header",children:[(0,i.jsx)(D,{size:20}),(0,i.jsx)(s.BaseControl,{id:"parsely-cross-linker-settings",className:"parsely-panel-settings-header-label",label:(0,p.__)("Smart Linking Settings","wp-parsely"),children:(0,i.jsx)(s.Button,{label:(0,p.__)("Tweak the settings of the Smart Linking","wp-parsely"),icon:q,onClick:function(){r("CrossLinksSettingsOpen",!u),v(!u),f.trackEvent("cross_linker_ai_settings_toggled",{is_active:!u})},isPressed:u,size:"small"})})]}),u&&(0,i.jsxs)("div",{className:"parsely-panel-settings-body",children:[(0,i.jsx)(s.RangeControl,{disabled:n,value:l,initialPosition:l,onChange:function(e){h(null!=e?e:1),r("CrossLinksMaxLinks",null!=e?e:se)},label:(0,p.__)("Links limit","wp-parsely"),help:(0,p.__)("The maximum number of smart links to add in the content.","wp-parsely"),min:1,max:20}),(0,i.jsx)(s.RangeControl,{disabled:n,value:c,initialPosition:c,onChange:function(e){y(null!=e?e:1),r("CrossLinksMaxLinkWords",null!=e?e:oe)},label:(0,p.__)("Link length","wp-parsely"),help:(0,p.__)("The maximum length (in words) for the smart link.","wp-parsely"),min:1,max:8})]})]})},ce=window.wp.url,ue=(te=function(e,t){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},te(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}te(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});!function(e){e.CannotFormulateApiQuery="ch_cannot_formulate_api_query",e.FetchError="fetch_error",e.HttpRequestFailed="http_request_failed",e[e.ParselyApiForbidden=403]="ParselyApiForbidden",e.ParselyApiResponseContainsError="ch_response_contains_error",e.ParselyApiReturnedNoData="ch_parsely_api_returned_no_data",e.ParselyApiReturnedTooManyResults="ch_parsely_api_returned_too_many_results",e[e.ParselyApiUnauthorized=401]="ParselyApiUnauthorized",e[e.ParselyInternalServerError=500]="ParselyInternalServerError",e.PluginCredentialsNotSetMessageDetected="parsely_credentials_not_set_message_detected",e.PluginSettingsApiSecretNotSet="parsely_api_secret_not_set",e.PluginSettingsSiteIdNotSet="parsely_site_id_not_set",e.PostIsNotPublished="ch_post_not_published"}(ne||(ne={}));var pe=function(e){function t(n,r,i){void 0===i&&(i=(0,p.__)("Error: ","wp-parsely"));var s=e.call(this,i+n)||this;s.hint=null,s.name=s.constructor.name,s.code=r;var o=[ne.ParselyApiForbidden,ne.ParselyApiResponseContainsError,ne.ParselyApiReturnedNoData,ne.ParselyApiReturnedTooManyResults,ne.ParselyApiUnauthorized,ne.PluginCredentialsNotSetMessageDetected,ne.PluginSettingsApiSecretNotSet,ne.PluginSettingsSiteIdNotSet,ne.PostIsNotPublished];return s.retryFetch=!o.includes(s.code),Object.setPrototypeOf(s,t.prototype),s.code===ne.ParselyApiUnauthorized&&(s.message=(0,p.__)("This feature is accessible to select customers participating in its beta testing.","wp-parsely")),s.code===ne.ParselyInternalServerError&&(s.message=(0,p.__)("The Parse.ly API returned an internal server error. Please try again later.","wp-parsely")),s.code===ne.HttpRequestFailed&&s.message.includes("cURL error 28")&&(s.message=(0,p.__)("The Parse.ly API did not respond in a timely manner. Please try again later.","wp-parsely")),s}return ue(t,e),t.prototype.Message=function(e){return void 0===e&&(e=null),[ne.PluginCredentialsNotSetMessageDetected,ne.PluginSettingsSiteIdNotSet,ne.PluginSettingsApiSecretNotSet].includes(this.code)?H(e):(this.code===ne.FetchError&&(this.hint=this.Hint((0,p.__)("This error can sometimes be caused by ad-blockers or browser tracking protections. Please add this site to any applicable allow lists and try again.","wp-parsely"))),this.code===ne.ParselyApiForbidden&&(this.hint=this.Hint((0,p.__)("Please ensure that the Site ID and API Secret given in the plugin's settings are correct.","wp-parsely"))),this.code===ne.HttpRequestFailed&&(this.hint=this.Hint((0,p.__)("The Parse.ly API cannot be reached. Please verify that you are online.","wp-parsely"))),(0,i.jsx)(U,{className:null==e?void 0:e.className,testId:"error",children:"<p>".concat(this.message,"</p>").concat(this.hint?this.hint:"")}))},t.prototype.Hint=function(e){return'<p className="content-helper-error-message-hint" data-testid="content-helper-error-message-hint"><strong>'.concat((0,p.__)("Hint:","wp-parsely"),"</strong> ").concat(e,"</p>")},t}(Error),de=function(){function e(){}return e.generateCrossLinks=function(e,t,n){var r,i,s,o,a;return void 0===t&&(t=oe),void 0===n&&(n=se),i=this,s=void 0,a=function(){var i,s;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,B()({method:"POST",path:(0,ce.addQueryArgs)("/wp-parsely/v1/content-suggestions/suggest-links",{max_link_words:t,max_links:n}),data:{content:e}})];case 1:return i=o.sent(),[3,3];case 2:return s=o.sent(),[2,Promise.reject(new pe(s.message,s.code))];case 3:return(null==i?void 0:i.error)?[2,Promise.reject(new pe(i.error.message,ne.ParselyApiResponseContainsError))]:[2,null!==(r=i.data)&&void 0!==r?r:[]]}}))},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{l(a.next(e))}catch(e){t(e)}}function r(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(n,r)}l((a=a.apply(i,s||[])).next())}))},e}();function fe(e,t,n,r){for(var i,s=0,o=new RegExp(t.source,"g"+(t.ignoreCase?"i":"")+(t.multiline?"m":""));null!==(i=o.exec(e));){if(s===r)return e.substring(0,i.index)+n+e.substring(o.lastIndex);s++}return e}var he,ye=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},ve=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};!function(e){e.Unknown="unknown",e.ContentHelperSidebar="content_helper_sidebar",e.BlockInspector="block_inspector"}(he||(he={}));var ge=function(e){var t=e.className,n=e.selectedBlockClientId,r=e.context,o=void 0===r?he.Unknown:r,l=e.sidebarSettings,c=e.onSettingChange,d=(0,a.useSelect)((function(e){var t=e(ee),n=t.isLoading,r=t.getOverlayBlocks,i=t.getSuggestedLinks,s=t.getError,o=t.isFullContent,a=t.getMaxLinks,l=t.getMaxLinkWords;return{loading:n(),error:s(),maxLinks:a(),maxLinkWords:l(),fullContent:o(),overlayBlocks:r(),suggestedLinks:i()}}),[]),h=d.loading,y=d.fullContent,v=d.overlayBlocks,g=d.error,_=d.suggestedLinks,w=d.maxLinks,b=d.maxLinkWords,m=(0,a.useDispatch)(ee),x=m.setLoading,j=m.setFullContent,S=m.setSettings,k=m.setError,P=m.setSuggestedLinks,T=m.addOverlayBlock,E=m.removeOverlayBlock;(0,u.useEffect)((function(){S(l)}),[S,l]);var C=(0,a.useSelect)((function(e){var t=e("core/block-editor"),r=t.getSelectedBlock,i=t.getBlock,s=e("core/editor").getEditedPostContent;return{selectedBlock:n?i(n):r(),postContent:s()}}),[n]),O=C.selectedBlock,L=C.postContent,A=function(e){return void 0===e&&(e="all"),ye(void 0,void 0,void 0,(function(){var t;return ve(this,(function(n){switch(n.label){case 0:return[4,E(e)];case 1:return n.sent(),o===he.BlockInspector&&("all"===e||y?(t=(0,a.select)("core/block-editor").getBlockOrder()[0],(0,a.dispatch)("core/block-editor").selectBlock(t)):(0,a.dispatch)("core/block-editor").selectBlock(e)),0===v.length&&R(),[2]}}))}))},N=function(){(0,a.dispatch)("core/editor").lockPostSaving("wp-parsely-block-overlay"),document.querySelectorAll('.edit-post-header__settings>[type="button"]').forEach((function(e){e.setAttribute("disabled","disabled")}))},R=function(){document.querySelectorAll('.edit-post-header__settings>[type="button"]').forEach((function(e){e.removeAttribute("disabled")})),(0,a.dispatch)("core/editor").unlockPostSaving("wp-parsely-block-overlay")};return(0,i.jsx)("div",{className:"wp-parsely-cross-linker",children:(0,i.jsxs)(s.PanelRow,{className:t,children:[(0,i.jsx)("div",{className:"wp-parsely-cross-linker-text",children:O?(0,p.__)("Automatically generate the most relevant links with organic search traffic in past month for a block of text using the Parse.ly API.","wp-parsely"):(0,p.__)("Automatically generate the most relevant links with organic search traffic in past month for the entire post using the Parse.ly API. You can also select a specific block to generate cross links for.","wp-parsely")}),g&&(0,i.jsx)(s.Notice,{status:"info",isDismissible:!1,className:"wp-parsely-content-helper-error",children:g.message}),null!==_&&(0,i.jsx)(s.Notice,{status:"success",isDismissible:!1,className:"wp-parsely-cross-linker-suggested-links",children:/* translators: 1 - number of cross links generated */
(0,p.sprintf)((0,p.__)("Successfully added %s smart links.","wp-parsely"),_.length)}),(0,i.jsx)(le,{disabled:h,onSettingChange:c}),(0,i.jsxs)("div",{className:"wp-parsely-cross-linker-generate",children:[(0,i.jsx)(s.Button,{onClick:function(){return ye(void 0,void 0,void 0,(function(){var e,t,n,r,i;return ve(this,(function(s){switch(s.label){case 0:return[4,x(!0)];case 1:return s.sent(),[4,P(null)];case 2:return s.sent(),[4,k(null)];case 3:return s.sent(),f.trackEvent("cross_linker_generate_pressed",{is_full_content:y,selected_block:null!==(i=null==O?void 0:O.name)&&void 0!==i?i:"none",context:o}),[4,(l=y?"all":null==O?void 0:O.clientId,void 0===l&&(l="all"),ye(void 0,void 0,void 0,(function(){return ve(this,(function(e){switch(e.label){case 0:return[4,T(l)];case 1:return e.sent(),N(),[2]}}))})))];case 4:s.sent(),e=setTimeout((function(){var e;x(!1),f.trackEvent("cross_linker_generate_timeout",{is_full_content:y,selected_block:null!==(e=null==O?void 0:O.name)&&void 0!==e?e:"none",context:o}),A(y?"all":null==O?void 0:O.clientId)}),6e4),s.label=5;case 5:return s.trys.push([5,11,12,15]),t=y||!O,n=[],!(null==O?void 0:O.originalContent)||t?[3,7]:[4,de.generateCrossLinks(null==O?void 0:O.originalContent,b,w)];case 6:return n=s.sent(),[3,9];case 7:return[4,de.generateCrossLinks(L,b,w)];case 8:n=s.sent(),s.label=9;case 9:return[4,P(n)];case 10:return s.sent(),function(e){var t;f.trackEvent("cross_linker_applied",{is_full_content:y,selected_block:null!==(t=null==O?void 0:O.name)&&void 0!==t?t:"none",links_count:e.length,context:o});for(var n="",r=n=O&&!y?O.attributes.content:L,i=0,s=e;i<s.length;i++){var l=s[i];if(!n.includes(l.title)||!n.includes(l.href)){l.text=l.text.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var c=new RegExp(l.text,"g"),u=r.match(c),p=n.match(c);u&&p&&(null==u?void 0:u.length)>(null==p?void 0:p.length)&&l.offset++;var d='<a href="'.concat(l.href,'" title="').concat(l.title,'">').concat(l.text,"</a>");r=fe(r,new RegExp("(".concat(l.text,"|<a[^>]*>").concat(l.text,"</a>)")),d,l.offset)}}O&&!y?(0,a.dispatch)("core/block-editor").updateBlockAttributes(O.clientId,{content:r}):(0,a.dispatch)("core/editor").editPost({content:r})}(n),[3,15];case 11:return r=s.sent(),k(r),[3,15];case 12:return[4,x(!1)];case 13:return s.sent(),[4,A(y?"all":null==O?void 0:O.clientId)];case 14:return s.sent(),clearTimeout(e),[7];case 15:return[2]}var l}))}))},variant:"primary",isBusy:h,disabled:h,children:h?(0,p.__)("Generating‚Ä¶","wp-parsely"):(0,p.__)("Add Smart Links","wp-parsely")}),(0,i.jsx)(s.Disabled,{isDisabled:h,children:(0,i.jsx)(s.CheckboxControl,{checked:!O||y,disabled:h,onChange:O?j:function(){},label:(0,p.__)("Add smart links for the entire post","wp-parsely")})})]})]})})};function _e(e,t,n){void 0===t&&(t=1),void 0===n&&(n="");var r=parseInt(e.replace(/\D/g,""),10);if(r<1e3)return e;r<1e4&&(t=1);var i=r,s=r.toString(),o="",a=0;return Object.entries({1e3:"k","1,000,000":"M","1,000,000,000":"B","1,000,000,000,000":"T","1,000,000,000,000,000":"Q"}).forEach((function(e){var n=e[0],l=e[1],c=parseInt(n.replace(/\D/g,""),10);if(r>=c){var u=t;(i=r/c)%1>1/a&&(u=i>10?1:2),u=parseFloat(i.toFixed(2))===parseFloat(i.toFixed(0))?0:u,s=i.toFixed(u),o=l}a=c})),s+n+o}var we={month:"short",day:"numeric",year:"numeric"},be={month:"short",day:"numeric"},me=(0,p.__)("Date N/A","wp-parsely");function xe(e){if(!1===function(e){return!isNaN(+e)&&0!==e.getTime()}(e))return me;var t=we;return e.getUTCFullYear()===(new Date).getUTCFullYear()&&(t=be),Intl.DateTimeFormat(document.documentElement.lang||"en",t).format(e)}function je(e){return{period_start:e,period_end:""}}var Se=function(){return Se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Se.apply(this,arguments)},ke=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},Pe=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Te=function(){function e(){this.itmSource="wp-parsely-content-helper"}return e.prototype.getPerformanceDetails=function(e){return ke(this,void 0,void 0,(function(){var t,n,r,i,s;return Pe(this,(function(o){switch(o.label){case 0:if(!1===(t=(0,a.select)("core/editor")).isCurrentPostPublished())return[2,Promise.reject(new pe((0,p.__)("This post is not published, so its details are unavailable.","wp-parsely"),ne.PostIsNotPublished,""))];if(null===(n=t.getPermalink()))return[2,Promise.reject(new pe((0,p.__)("The post's URL returned null.","wp-parsely"),ne.PostIsNotPublished))];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.fetchPerformanceDataFromWpEndpoint(e,n)];case 2:return r=o.sent(),[4,this.fetchReferrerDataFromWpEndpoint(e,n,r.views)];case 3:return i=o.sent(),[3,5];case 4:return s=o.sent(),[2,Promise.reject(s)];case 5:return[2,Se(Se({},r),{referrers:i})]}}))}))},e.prototype.fetchPerformanceDataFromWpEndpoint=function(e,t){return ke(this,void 0,void 0,(function(){var n,r;return Pe(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,B()({path:(0,ce.addQueryArgs)("/wp-parsely/v1/stats/post/detail",Se(Se({},je(e)),{itm_source:this.itmSource,url:t}))})];case 1:return n=i.sent(),[3,3];case 2:return r=i.sent(),[2,Promise.reject(new pe(r.message,r.code))];case 3:return(null==n?void 0:n.error)?[2,Promise.reject(new pe(n.error.message,ne.ParselyApiResponseContainsError))]:0===n.data.length?[2,Promise.reject(new pe((0,p.sprintf)(/* translators: URL of the published post */
(0,p.__)("The post %s has 0 views, or the Parse.ly API returned no data.","wp-parsely"),t),ne.ParselyApiReturnedNoData,""))]:n.data.length>1?[2,Promise.reject(new pe((0,p.sprintf)(/* translators: URL of the published post */
(0,p.__)("Multiple results were returned for the post %s by the Parse.ly API.","wp-parsely"),t),ne.ParselyApiReturnedTooManyResults))]:[2,n.data[0]]}}))}))},e.prototype.fetchReferrerDataFromWpEndpoint=function(e,t,n){return ke(this,void 0,void 0,(function(){var r,i;return Pe(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,B()({path:(0,ce.addQueryArgs)("/wp-parsely/v1/referrers/post/detail",Se(Se({},je(e)),{itm_source:this.itmSource,total_views:n,url:t}))})];case 1:return r=s.sent(),[3,3];case 2:return i=s.sent(),[2,Promise.reject(new pe(i.message,i.code))];case 3:return(null==r?void 0:r.error)?[2,Promise.reject(new pe(r.error.message,ne.ParselyApiResponseContainsError))]:[2,r.data]}}))}))},e}(),Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ee.apply(this,arguments)},Ce=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},Oe=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function Le(e){var t=this,n=e.period,r=(0,u.useState)(!0),o=r[0],a=r[1],l=(0,u.useState)(),c=l[0],p=l[1],d=(0,u.useState)(),f=d[0],h=d[1];return(0,u.useEffect)((function(){var e=new Te,r=function(i){return Ce(t,void 0,void 0,(function(){var t=this;return Oe(this,(function(s){return e.getPerformanceDetails(n).then((function(e){h(e),a(!1)})).catch((function(e){return Ce(t,void 0,void 0,(function(){return Oe(this,(function(t){switch(t.label){case 0:return i>0&&e.retryFetch?[4,new Promise((function(e){return setTimeout(e,500)}))]:[3,3];case 1:return t.sent(),[4,r(i-1)];case 2:return t.sent(),[3,4];case 3:p(e),a(!1),t.label=4;case 4:return[2]}}))}))})),[2]}))}))};return a(!0),r(1),function(){p(void 0)}}),[n]),c?c.Message():o?(0,i.jsx)("div",{className:"parsely-spinner-wrapper","data-testid":"parsely-spinner-wrapper",children:(0,i.jsx)(s.Spinner,{})}):(0,i.jsx)(Ae,{data:f,period:n})}function Ae(e){return(0,i.jsxs)("div",{className:"performance-details-panel",children:[(0,i.jsx)("div",{className:"section period",children:V(e.period)}),(0,i.jsx)(Ne,Ee({},e)),(0,i.jsx)(Re,Ee({},e)),(0,i.jsx)(Ie,Ee({},e)),(0,i.jsx)(Be,Ee({},e))]})}function Ne(e){var t=e.data;return(0,i.jsx)("div",{className:"section general-performance",children:(0,i.jsxs)("table",{children:[(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:_e(t.views)}),(0,i.jsx)("td",{children:_e(t.visitors)}),(0,i.jsx)("td",{children:t.avgEngaged})]})}),(0,i.jsx)("tfoot",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:(0,p.__)("Page Views","wp-parsely")}),(0,i.jsx)("th",{children:(0,p.__)("Visitors","wp-parsely")}),(0,i.jsx)("th",{children:(0,p.__)("Avg. Time","wp-parsely")})]})})]})})}function Re(e){var t=e.data;delete t.referrers.types.totals;var n=function(e){switch(e){case"social":return(0,p.__)("Social","wp-parsely");case"search":return(0,p.__)("Search","wp-parsely");case"other":return(0,p.__)("Other","wp-parsely");case"internal":return(0,p.__)("Internal","wp-parsely");case"direct":return(0,p.__)("Direct","wp-parsely")}return e};return(0,i.jsxs)("div",{className:"section referrer-types",children:[(0,i.jsx)("div",{className:"section-title",children:(0,p.__)("Referrers (Page Views)","wp-parsely")}),(0,i.jsx)("div",{className:"multi-percentage-bar",children:Object.entries(t.referrers.types).map((function(e){var t=e[0],r=e[1],s=(0,p.sprintf)(/* translators: 1: Referrer type, 2: Percentage value, %%: Escaped percent sign */
(0,p.__)("%1$s: %2$s%%","wp-parsely"),n(t),r.viewsPercentage);return(0,i.jsx)("div",{"aria-label":s,className:"bar-fill "+t,style:{width:r.viewsPercentage+"%"}},t)}))}),(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsx)("tr",{children:Object.keys(t.referrers.types).map((function(e){return(0,i.jsx)("th",{children:n(e)},e)}))})}),(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:Object.entries(t.referrers.types).map((function(e){var t=e[0],n=e[1];return(0,i.jsx)("td",{children:_e(n.views)},t)}))})})]})]})}function Ie(e){var t=e.data,n=0;return(0,i.jsxs)("div",{className:"section top-referrers",children:[(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:(0,p.__)("Top Referrers","wp-parsely")}),(0,i.jsx)("th",{colSpan:2,scope:"colgroup",children:(0,p.__)("Page Views","wp-parsely")})]})}),(0,i.jsx)("tbody",{children:Object.entries(t.referrers.top).map((function(e){var t=e[0],r=e[1];if("totals"===t)return n=Number(r.viewsPercentage),null;var s=t;"direct"===t&&(s=(0,p.__)("Direct","wp-parsely"))
/* translators: %s: Percentage value, %%: Escaped percent sign */;var o=(0,p.sprintf)((0,p.__)("%s%%","wp-parsely"),r.viewsPercentage);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"row",children:s}),(0,i.jsx)("td",{children:(0,i.jsx)("div",{"aria-label":o,className:"percentage-bar",style:{"--bar-fill":r.viewsPercentage+"%"}})}),(0,i.jsx)("td",{children:_e(r.views)})]},t)}))})]}),(0,i.jsxs)("div",{children:[" ",/* translators: %s: Percentage value, %%: Escaped percent sign */
(0,p.sprintf)((0,p._n)("%s%% of views came from top referrers.","%s%% of views came from top referrers.",n,"wp-parsely"),n)]})]})}function Be(e){var t=e.data,n=(0,i.jsxs)("span",{className:"screen-reader-text",children:[" ",(0,p.__)("(opens in new tab)","wp-parsely")]});return(0,i.jsxs)("div",{className:"section actions",children:[(0,i.jsxs)(s.Button,{href:t.url,rel:"noopener",target:"_blank",variant:"secondary",children:[(0,p.__)("Visit Post","wp-parsely"),n]}),(0,i.jsxs)(s.Button,{href:t.dashUrl,rel:"noopener",target:"_blank",variant:"primary",children:[(0,p.__)("View in Parse.ly","wp-parsely"),n]})]})}var Me=function(e){var t=e.filter,n=e.label,s=e.onFilterTypeChange,o=e.onFilterValueChange,a=e.postData,l=function(){return a.tags.length>=1&&a.categories.length>=1||a.tags.length>=1&&a.authors.length>=1||a.categories.length>=1&&a.authors.length>=1},c=function(){return r.Tag===t.type&&a.tags.length>1||r.Section===t.type&&a.categories.length>1||r.Author===t.type&&a.authors.length>1},u=c()&&!l();return(0,i.jsxs)(i.Fragment,{children:[l()&&(0,i.jsx)(Fe,{filter:t,label:u?void 0:n,onFilterTypeChange:s,postData:a}),c()&&(0,i.jsx)(De,{filter:t,label:u?n:void 0,onFilterValueChange:o,postData:a})]})},Fe=function(e){var t=e.filter,n=e.label,o=e.onFilterTypeChange,a=e.postData;return(0,i.jsxs)(s.SelectControl,{label:n,onChange:function(e){return o(e)},value:t.type,children:[a.tags.length>=1&&(0,i.jsx)("option",{value:r.Tag,children:(0,p.__)("Tag","wp-parsely")}),a.categories.length>=1&&(0,i.jsx)("option",{value:r.Section,children:(0,p.__)("Section","wp-parsely")}),a.authors.length>=1&&(0,i.jsx)("option",{value:r.Author,children:(0,p.__)("Author","wp-parsely")})]})},De=function(e){var t=e.filter,n=e.label,o=e.onFilterValueChange,a=e.postData;return(0,i.jsx)(s.ComboboxControl,{label:n,onChange:function(e){return o(e)},options:r.Tag===t.type?a.tags.map((function(e){return{value:e,label:e}})):r.Section===t.type?a.categories.map((function(e){return{value:e,label:e}})):r.Author===t.type?a.authors.map((function(e){return{value:e,label:e}})):[],value:t.value})},ze=function(){return(0,i.jsx)(s.SVG,{"aria-hidden":"true",version:"1.1",viewBox:"0 0 15 15",width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)(s.Path,{d:"M0 14.0025V11.0025L7.5 3.5025L10.5 6.5025L3 14.0025H0ZM12 5.0025L13.56 3.4425C14.15 2.8525 14.15 1.9025 13.56 1.3225L12.68 0.4425C12.09 -0.1475 11.14 -0.1475 10.56 0.4425L9 2.0025L12 5.0025Z"})})},Ve=function(){return(0,i.jsxs)(s.SVG,{"aria-hidden":"true",version:"1.1",viewBox:"0 0 16 16",width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)(s.Path,{d:"M0 3.29592C0 2.73237 0.456853 2.27551 1.02041 2.27551H4.08165C4.50432 2.27551 4.84696 2.61815 4.84696 3.04082C4.84696 3.46349 4.50432 3.80613 4.08165 3.80613H1.53062V11.9694H9.69391V9.6735C9.69391 9.25083 10.0366 8.90819 10.4592 8.90819C10.8819 8.90819 11.2245 9.25083 11.2245 9.6735V12.4796C11.2245 13.0432 10.7677 13.5 10.2041 13.5H1.02041C0.456854 13.5 0 13.0432 0 12.4796V3.29592Z"}),(0,i.jsx)(s.Path,{d:"M12.531 1.22415C12.8299 1.52303 12.8299 2.00759 12.531 2.30646L6.15342 8.68404C5.85455 8.98291 5.36998 8.98291 5.07111 8.68404C4.77224 8.38517 4.77224 7.9006 5.07111 7.60173L11.4487 1.22415C11.7476 0.925282 12.2321 0.925282 12.531 1.22415Z"}),(0,i.jsx)(s.Path,{d:"M6.63268 1.51012C6.63268 1.08745 6.97532 0.744812 7.39799 0.744812H12.2449C12.6676 0.744812 13.0103 1.08745 13.0103 1.51012V6.35708C13.0103 6.77975 12.6676 7.12239 12.2449 7.12239C11.8223 7.12239 11.4796 6.77975 11.4796 6.35708V2.27543H7.39799C6.97532 2.27543 6.63268 1.93279 6.63268 1.51012Z"})]})},Ge=function(){return(0,i.jsx)(s.SVG,{"aria-hidden":"true",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 42 42",children:(0,i.jsx)(s.Path,{d:"M15.3,20.1c0,3.1,2.6,5.7,5.7,5.7s5.7-2.6,5.7-5.7s-2.6-5.7-5.7-5.7S15.3,17,15.3,20.1z M23.4,32.4\n\t\t\tC30.1,30.9,40.5,22,40.5,22s-7.7-12-18-13.3c-0.6-0.1-2.6-0.1-3-0.1c-10,1-18,13.7-18,13.7s8.7,8.6,17,9.9\n\t\t\tC19.4,32.6,22.4,32.6,23.4,32.4z M11.1,20.7c0-5.2,4.4-9.4,9.9-9.4s9.9,4.2,9.9,9.4S26.5,30,21,30S11.1,25.8,11.1,20.7z"})})};function Ue(e){var t=e.metric,n=e.post,r=e.avgEngagedIcon,s=e.viewsIcon;return"views"===t?(0,i.jsxs)("span",{className:"parsely-top-post-metric-data",children:[(0,i.jsx)("span",{className:"screen-reader-text",children:(0,p.__)("Number of Views","wp-parsely")}),s,_e(n.views.toString())]}):"avg_engaged"===t?(0,i.jsxs)("span",{className:"parsely-top-post-metric-data",children:[(0,i.jsx)("span",{className:"screen-reader-text",children:(0,p.__)("Average Time","wp-parsely")}),r,n.avgEngaged]}):(0,i.jsx)("span",{className:"parsely-top-post-metric-data",children:"-"})}function He(e){var t,n=e.metric,r=e.post;return(0,i.jsxs)("li",{className:"parsely-top-post","data-testid":"parsely-top-post",children:[(0,i.jsxs)("div",{className:"parsely-top-post-title",children:[(0,i.jsxs)("a",{className:"parsely-top-post-stats-link",href:r.dashUrl,target:"_blank",rel:"noreferrer",children:[(0,i.jsx)("span",{className:"screen-reader-text",children:(0,p.__)("View in Parse.ly (opens new tab)","wp-parsely")}),r.title]}),(0,i.jsxs)("a",{className:"parsely-top-post-view-link",href:r.url,target:"_blank",rel:"noreferrer",children:[(0,i.jsx)("span",{className:"screen-reader-text",children:(0,p.__)("View Post (opens new tab)","wp-parsely")}),(0,i.jsx)(Ve,{})]}),0!==r.postId&&(0,i.jsxs)("a",{className:"parsely-top-post-edit-link",href:(t=r.postId,"/wp-admin/post.php?post=".concat(t,"&action=edit")),target:"_blank",rel:"noreferrer",children:[(0,i.jsx)("span",{className:"screen-reader-text",children:(0,p.__)("Edit Post (opens new tab)","wp-parsely")}),(0,i.jsx)(ze,{})]})]}),(0,i.jsxs)("p",{className:"parsely-top-post-info",children:[(0,i.jsxs)("span",{className:"parsely-top-post-date",children:[(0,i.jsx)("span",{className:"screen-reader-text",children:(0,p.__)("Date","wp-parsely")}),xe(new Date(r.date))]}),(0,i.jsxs)("span",{className:"parsely-top-post-author",children:[(0,i.jsx)("span",{className:"screen-reader-text",children:(0,p.__)("Author","wp-parsely")}),r.author]}),(0,i.jsx)(Ue,{metric:n,post:r,viewsIcon:(0,i.jsx)(Ge,{}),avgEngagedIcon:(0,i.jsx)(s.Dashicon,{icon:"clock"})})]})]})}var We=function(){return We=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},We.apply(this,arguments)},$e=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},qe=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Ke=function(){function e(){}return e.getRelatedTopPosts=function(e,t,n){return $e(this,void 0,void 0,(function(){var r,i,s;return qe(this,(function(o){switch(o.label){case 0:try{r=this.buildRelatedTopPostsApiQuery(e,t,n)}catch(e){return[2,Promise.reject(e)]}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchRelatedTopPostsFromWpEndpoint(r)];case 2:return i=o.sent(),[3,4];case 3:return s=o.sent(),[2,Promise.reject(s)];case 4:return[2,{message:this.generateMessage(0===i.length,e,r.message),posts:i}]}}))}))},e.generateMessage=function(e,t,n){return e?(0,p.sprintf)(/* translators: 1: message such as "in category Foo" */
(0,p.__)("No top posts %1$s were found for the specified period and metric.","wp-parsely"),n):(0,p.sprintf)(/* translators: 1: message such as "in category Foo", 2: period such as "last 7 days"*/
(0,p.__)("Top posts %1$s in the %2$s.","wp-parsely"),n,V(t,!0))},e.fetchRelatedTopPostsFromWpEndpoint=function(e){var t;return $e(this,void 0,void 0,(function(){var n,r;return qe(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,B()({path:(0,ce.addQueryArgs)("/wp-parsely/v1/stats/posts",We(We({},e.query),{itm_source:"wp-parsely-content-helper"}))})];case 1:return n=i.sent(),[3,3];case 2:return r=i.sent(),[2,Promise.reject(new pe(r.message,r.code))];case 3:return(null==n?void 0:n.error)?[2,Promise.reject(new pe(n.error.message,ne.ParselyApiResponseContainsError))]:[2,null!==(t=null==n?void 0:n.data)&&void 0!==t?t:[]]}}))}))},e.buildRelatedTopPostsApiQuery=function(e,t,n){var i=We(We({},je(e)),{limit:5,sort:t});if(r.Tag===n.type)return{query:We({tag:n.value},i),
/* translators: %s: message such as "with tag Foo" */
message:(0,p.sprintf)((0,p.__)('with tag "%1$s"',"wp-parsely"),n.value)};if(r.Section===n.type)return{query:We({section:n.value},i),
/* translators: %s: message such as "in category Foo" */
message:(0,p.sprintf)((0,p.__)('in section "%1$s"',"wp-parsely"),n.value)};if(r.Author===n.type)return{query:We({author:n.value},i),
/* translators: %s: message such as "by author John" */
message:(0,p.sprintf)((0,p.__)('by author "%1$s"',"wp-parsely"),n.value)};throw new pe((0,p.__)("No valid filter type has been specified.","wp-parsely"),ne.CannotFormulateApiQuery)},e}(),Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ye.apply(this,arguments)},Qe=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},Xe=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function Ze(e){var t=this,n=e.initialFilter,o=e.metric,a=e.onFilterChange,l=e.period,c=e.postData,d=(0,u.useState)(!0),h=d[0],y=d[1],v=(0,u.useState)(),g=v[0],_=v[1],w=(0,u.useState)(),b=w[0],m=w[1],x=(0,u.useState)([]),j=x[0],S=x[1],k=(0,u.useState)(n),P=k[0],T=k[1];(0,u.useEffect)((function(){var e,n,i=function(e){return Qe(t,void 0,void 0,(function(){var t=this;return Xe(this,(function(n){return Ke.getRelatedTopPosts(l,o,P).then((function(e){S(e.posts),m(e.message),y(!1)})).catch((function(n){return Qe(t,void 0,void 0,(function(){return Xe(this,(function(t){switch(t.label){case 0:return e>0&&n.retryFetch?[4,new Promise((function(e){return setTimeout(e,500)}))]:[3,3];case 1:return t.sent(),[4,i(e-1)];case 2:return t.sent(),[3,4];case 3:y(!1),_(n),t.label=4;case 4:return[2]}}))}))})),[2]}))}))},s=r.Tag===P.type,a=r.Unavailable===P.type,u=0===c.tags.length,p=s&&!c.tags.includes(P.value);return y(!0),a||s&&u?T((e="",n=r.Unavailable,c.tags.length>=1?(n=r.Tag,e=c.tags[0]):c.categories.length>=1?(n=r.Section,e=c.categories[0]):(n=r.Author,e=c.authors[0]),{type:n,value:e})):p?T({type:r.Tag,value:c.tags[0]}):i(1),function(){y(!1),S([]),m(""),_(void 0)}}),[l,o,P,c]);var E=(0,i.jsx)("div",{className:"parsely-spinner-wrapper","data-testid":"parsely-spinner-wrapper",children:(0,i.jsx)(s.Spinner,{})}),C=(0,i.jsx)(Me,{filter:P,label:(0,p.__)("Filter by","wp-parsely"),onFilterTypeChange:function(e){if(z(e,r)){var t="",n=e;r.Tag===n&&(t=c.tags[0]),r.Section===n&&(t=c.categories[0]),r.Author===n&&(t=c.authors[0]),""!==t&&(a(n,t),T({type:n,value:t}),f.trackEvent("related_top_posts_filter_type_changed",{filter_type:n}))}},onFilterValueChange:function(e){"string"==typeof e&&(a(P.type,e),T(Ye(Ye({},P),{value:e})))},postData:c});return g?(0,i.jsxs)(i.Fragment,{children:[C,g.Message({className:"parsely-top-posts-descr"})]}):(0,i.jsxs)(i.Fragment,{children:[C,h?E:(0,i.jsxs)("div",{className:"parsely-top-posts-wrapper",children:[(0,i.jsx)("p",{className:"parsely-top-posts-descr","data-testid":"parsely-top-posts-descr",children:b}),(0,i.jsx)("ol",{className:"parsely-top-posts",children:j.map((function(e){return(0,i.jsx)(He,{metric:o,post:e},e.id)}))})]})]})}var Je,et=function(e){var t=e.isLoading,n=e.isOpen,r=e.onPersonaChange,o=e.onSettingChange,a=e.onToneChange,l=e.persona,c=e.tone,d=(0,u.useState)(n),h=d[0],y=d[1];return(0,i.jsxs)("div",{className:"parsely-panel-settings",children:[(0,i.jsxs)("div",{className:"parsely-panel-settings-header",children:[(0,i.jsx)(D,{size:20}),(0,i.jsx)(s.BaseControl,{id:"parsely-write-titles-settings",className:"parsely-panel-settings-header-label",label:(0,p.__)("Parse.ly AI Settings","wp-parsely"),children:(0,i.jsx)(s.Button,{label:(0,p.__)("Change Tone & Persona","wp-parsely"),icon:q,onClick:function(){o("TitleSuggestionsSettingsOpen",!h),y(!h),f.trackEvent("title_suggestions_ai_settings_toggled",{is_active:!h})},isPressed:h,size:"small"})})]}),h&&(0,i.jsxs)("div",{className:"parsely-panel-settings-body",children:[(0,i.jsx)(A,{tone:c,label:C(c),onChange:function(e){a(e)},onDropdownChange:function(e){f.trackEvent("title_suggestions_ai_tone_changed",{tone:e})},disabled:t,allowCustom:!0}),(0,i.jsx)(k,{persona:l,label:x(l),onChange:function(e){r(e)},onDropdownChange:function(e){f.trackEvent("title_suggestions_ai_persona_changed",{persona:e})},disabled:t,allowCustom:!0})]})]})},tt=(0,v.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,v.createElement)(g.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),nt=(0,v.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,v.createElement)(g.Path,{d:"m21.5 9.1-6.6-6.6-4.2 5.6c-1.2-.1-2.4.1-3.6.7-.1 0-.1.1-.2.1-.5.3-.9.6-1.2.9l3.7 3.7-5.7 5.7v1.1h1.1l5.7-5.7 3.7 3.7c.4-.4.7-.8.9-1.2.1-.1.1-.2.2-.3.6-1.1.8-2.4.6-3.6l5.6-4.1zm-7.3 3.5.1.9c.1.9 0 1.8-.4 2.6l-6-6c.8-.4 1.7-.5 2.6-.4l.9.1L15 4.9 19.1 9l-4.9 3.6z"})),rt=(0,v.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,v.createElement)(g.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),it=(0,v.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,v.createElement)(g.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})),st=function(){return st=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},st.apply(this,arguments)},ot=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},at=0;!function(e){e.PostTitle="postTitles",e.Heading="headings"}(Je||(Je={}));var lt={isLoading:!1,postTitles:{titles:[]},headings:{titles:[]}},ct=(0,a.createReduxStore)("wp-parsely/write-titles",{initialState:lt,reducer:function(e,t){var n,r,i,s,o,a;switch(void 0===e&&(e=lt),t.type){case"SET_LOADING":return st(st({},e),{isLoading:t.isLoading});case"SET_TITLES":return st(st({},e),((n={})[t.titleType]=st(st({},e[t.titleType]),{titles:ot(ot([],e[t.titleType].titles.filter((function(e){return e.isPinned})),!0),t.data.map((function(e){return{title:e,isPinned:!1,id:at++}})),!0)}),n));case"REMOVE_TITLE":return st(st({},e),((r={})[t.titleType]=st(st({},e[t.titleType]),{titles:e[t.titleType].titles.filter((function(e){return e.id!==t.title.id}))}),r));case"PIN_TITLE":return st(st({},e),((i={})[t.titleType]=st(st({},e[t.titleType]),{titles:e[t.titleType].titles.map((function(e){return e.id===t.title.id?st(st({},e),{isPinned:!0}):e}))}),i));case"UNPIN_TITLE":return st(st({},e),((s={})[t.titleType]=st(st({},e[t.titleType]),{titles:e[t.titleType].titles.map((function(e){return e.id===t.title.id?st(st({},e),{isPinned:!1}):e}))}),s));case"SET_ACCEPTED_TITLE":return st(st({},e),((o={})[t.titleType]=st(st({},e[t.titleType]),{acceptedTitle:t.title}),o));case"SET_ORIGINAL_TITLE":return st(st({},e),((a={})[t.titleType]=st(st({},e[t.titleType]),{originalTitle:t.title}),a));default:return e}},actions:{setLoading:function(e){return{type:"SET_LOADING",isLoading:e}},setTitles:function(e,t){return{type:"SET_TITLES",titleType:e,data:t}},removeTitle:function(e,t){return{type:"REMOVE_TITLE",titleType:e,title:t}},setAcceptedTitle:function(e,t){return{type:"SET_ACCEPTED_TITLE",titleType:e,title:t}},pinTitle:function(e,t){return{type:"PIN_TITLE",titleType:e,title:t}},unpinTitle:function(e,t){return{type:"UNPIN_TITLE",titleType:e,title:t}},setOriginalTitle:function(e,t){return{type:"SET_ORIGINAL_TITLE",titleType:e,title:t}}},selectors:{getState:function(e){return e},isLoading:function(e){return e.isLoading},getTitles:function(e,t){return e[t].titles.map((function(e){return e}))},getPinnedTitles:function(e,t){return e[t].titles.filter((function(e){return e.isPinned}))},isPinned:function(e,t,n){var r,i;return null!==(i=null===(r=e[t].titles.find((function(e){return e.id===n.id})))||void 0===r?void 0:r.isPinned)&&void 0!==i&&i},getAcceptedTitle:function(e,t){return e[t].acceptedTitle},isAcceptedTitle:function(e,t,n){var r;return(null===(r=e[t].acceptedTitle)||void 0===r?void 0:r.id)===n.id},getOriginalTitle:function(e,t){var n;if(e[t].originalTitle)return{id:-1,title:null!==(n=e[t].originalTitle)&&void 0!==n?n:"",isPinned:!1}}}});(0,a.register)(ct);var ut=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},pt=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},dt=function(e){var t=(0,a.useDispatch)(ct),n=t.removeTitle,r=t.setAcceptedTitle,o=t.pinTitle,l=t.unpinTitle,c=t.setOriginalTitle,u=(0,a.useSelect)((function(t){return t(ct).isPinned(e.type,e.title)}),[e.title,e.type]),d=(0,a.useSelect)((function(e){return(0,e("core/editor").getEditedPostAttribute)("title")}),[]),h=d===e.title.title;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"parsely-write-titles-title-suggestion\t".concat(h&&"title-in-use"," ").concat(e.isOriginal&&"original-title"),children:[(0,i.jsx)("div",{className:"parsely-write-titles-suggested-title",children:e.title.title}),(0,i.jsx)("div",{className:"parsely-write-titles-suggested-title-actions",children:e.isOriginal?(0,i.jsx)(s.ButtonGroup,{children:(0,i.jsx)(s.Button,{size:"small",iconSize:15,variant:"primary",icon:it,label:(0,p.__)("Restore Title","wp-parsely"),onClick:function(){return ut(void 0,void 0,void 0,(function(){return pt(this,(function(t){switch(t.label){case 0:return f.trackEvent("title_suggestion_restored",{type:e.type,restored_title:e.title.title,accepted_title:d}),(0,a.dispatch)("core/editor").editPost({title:e.title.title}),[4,c(e.type,void 0)];case 1:return t.sent(),[2]}}))}))}})}):(0,i.jsxs)(s.ButtonGroup,{children:[(0,i.jsx)(s.Button,{size:"small",iconSize:15,variant:"primary",icon:tt,label:(0,p.__)("Accept Title","wp-parsely"),onClick:function(){return ut(void 0,void 0,void 0,(function(){return pt(this,(function(t){switch(t.label){case 0:return f.trackEvent("title_suggestion_applied",{title:e.title.title,type:e.type}),[4,r(e.type,e.title)];case 1:return t.sent(),[2]}}))}))}}),(0,i.jsx)(s.Button,{size:"small",iconSize:15,className:u?"is-pinned":"",variant:"secondary",icon:nt,label:(0,p.__)("Pin Title","wp-parsely"),onClick:function(){return ut(void 0,void 0,void 0,(function(){return pt(this,(function(t){switch(t.label){case 0:return f.trackEvent("title_suggestion_pinned",{pinned:!u,type:e.type,title:e.title.title}),u?[4,l(e.type,e.title)]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,o(e.type,e.title)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}}),!u&&(0,i.jsx)(s.Button,{size:"small",iconSize:15,variant:"secondary",icon:rt,label:(0,p.__)("Remove Title","wp-parsely"),onClick:function(){return ut(void 0,void 0,void 0,(function(){return pt(this,(function(t){switch(t.label){case 0:return f.trackEvent("title_suggestion_removed",{type:e.type,title:e.title.title}),[4,n(e.type,e.title)];case 1:return t.sent(),[2]}}))}))}})]})})]})})},ft=function(){function e(){}return e.prototype.generateTitles=function(e,t,n,r){var i,s,o,a,l;return void 0===t&&(t=3),s=this,o=void 0,l=function(){var s,o;return function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,B()({path:(0,ce.addQueryArgs)("/wp-parsely/v1/content-suggestions/write-title",{content:e,limit:t,tone:C(n),persona:x(r)})})];case 1:return s=a.sent(),[3,3];case 2:return o=a.sent(),[2,Promise.reject(new pe(o.message,o.code))];case 3:return(null==s?void 0:s.error)?[2,Promise.reject(new pe(s.error.message,ne.ParselyApiResponseContainsError))]:[2,null!==(i=null==s?void 0:s.data)&&void 0!==i?i:[]]}}))},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,r)}i((l=l.apply(s,o||[])).next())}))},e}(),ht=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},yt=function(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},vt=function(e){var t=e.initialPersona,n=e.initialSettingsOpen,r=e.initialTone,o=e.onSettingChange,l=(0,u.useState)(),c=l[0],d=l[1],h=(0,u.useState)(r),y=h[0],v=h[1],g=(0,u.useState)(t),_=g[0],w=g[1],b=(0,a.useSelect)((function(e){var t=e(ct),n=t.isLoading,r=t.getTitles,i=t.getAcceptedTitle,s=t.getOriginalTitle;return{acceptedTitle:i(Je.PostTitle),loading:n(),titles:r(Je.PostTitle),originalTitle:s(Je.PostTitle)}}),[]),m=b.loading,j=b.titles,S=b.acceptedTitle,k=b.originalTitle,P=(0,a.useDispatch)(ct),T=P.setTitles,E=P.setLoading,O=P.setAcceptedTitle,L=P.setOriginalTitle,A=(0,a.useSelect)((function(e){return(0,e("core/editor").getEditedPostContent)()}),[]),N=(0,a.useSelect)((function(e){return(0,e("core/editor").getEditedPostAttribute)("title")}),[]),R=(0,i.jsx)(et,{isLoading:m,isOpen:n,onPersonaChange:function(e){o("TitleSuggestionsPersona",e),w(e)},onSettingChange:o,onToneChange:function(e){o("TitleSuggestionsTone",e),v(e)},persona:t,tone:r}),I=(0,i.jsx)("div",{className:"parsely-write-titles-generate-button",children:(0,i.jsxs)(s.Button,{variant:j.length>0?"secondary":"primary",isBusy:m,onClick:function(){return ht(void 0,void 0,void 0,(function(){return yt(this,(function(e){switch(e.label){case 0:return!1!==m?[3,2]:(f.trackEvent("title_suggestions_generate_pressed",{request_more:j.length>0,total_titles:j.length,total_pinned:j.filter((function(e){return e.isPinned})).length,tone:y,persona:_}),[4,(t=Je.PostTitle,n=A,r=y,i=_,ht(void 0,void 0,void 0,(function(){var e,s,o;return yt(this,(function(a){switch(a.label){case 0:return[4,E(!0)];case 1:a.sent(),e=new ft,a.label=2;case 2:return a.trys.push([2,5,,6]),[4,e.generateTitles(n,3,r,i)];case 3:return s=a.sent(),[4,T(t,s)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),d(o),[3,6];case 6:return[4,E(!1)];case 7:return a.sent(),[2]}}))})))]);case 1:e.sent(),e.label=2;case 2:return[2]}var t,n,r,i}))}))},children:[m&&(0,p.__)("Generating Titles‚Ä¶","wp-parsely"),!m&&j.length>0&&(0,p.__)("Generate More","wp-parsely"),!m&&0===j.length&&(0,p.__)("Generate Titles","wp-parsely")]})}),B=(0,i.jsxs)("div",{className:"parsely-write-titles-title-suggestions-container",children:[void 0!==k&&(0,i.jsx)(dt,{title:k,type:Je.PostTitle,isOriginal:!0}),j.map((function(e){return(0,i.jsx)(dt,{title:e,type:Je.PostTitle},e.id)}))]}),M=(0,i.jsxs)("div",{className:"parsely-write-titles-accepted-title-container",children:[(0,i.jsx)("div",{className:"parsely-write-titles-text",children:(0,p.__)("Replace the current post title with the following?","wp-parsely")}),(0,i.jsx)("div",{className:"parsely-write-titles-accepted-title",children:null==S?void 0:S.title}),(0,i.jsxs)("div",{className:"parsely-write-titles-accepted-title-actions",children:[(0,i.jsx)(s.Button,{variant:"secondary",onClick:function(){var e;O(Je.PostTitle,void 0),f.trackEvent("title_suggestions_cancel_pressed",{original_title:N,canceled_title:null!==(e=null==S?void 0:S.title)&&void 0!==e?e:""})},children:(0,p.__)("Cancel","wp-parsely")}),(0,i.jsx)(s.Button,{variant:"primary",onClick:function(){return ht(void 0,void 0,void 0,(function(){return yt(this,(function(e){switch(e.label){case 0:return[4,L(Je.PostTitle,N)];case 1:return e.sent(),(0,a.dispatch)("core/editor").editPost({title:null==S?void 0:S.title}),S?[4,(0,a.dispatch)(ct).pinTitle(Je.PostTitle,S)]:[3,3];case 2:e.sent(),f.trackEvent("title_suggestions_accept_pressed",{old_title:N,new_title:S.title}),e.label=3;case 3:return[4,O(Je.PostTitle,void 0)];case 4:return e.sent(),[2]}}))}))},children:(0,p.__)("Replace","wp-parsely")})]})]});return c?c.Message():(0,i.jsx)(s.PanelRow,{children:(0,i.jsxs)("div",{className:"parsely-write-titles-wrapper",children:[0===j.length&&void 0===S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"parsely-write-titles-text",children:(0,p.__)("Use Parse.ly AI to generate a title for your post.","wp-parsely")}),R,I]}),0<j.length&&void 0===S&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"parsely-write-titles-text",children:(0,u.createInterpolateElement)(
// translators: %1$s is the tone, %2$s is the persona.
(0,p.__)("We've generated a few <tone/> titles based on the content of your post, written as a <persona/>.","wp-parsely"),{tone:(0,i.jsx)("strong",{children:C(y)}),persona:(0,i.jsx)("strong",{children:x(_)})})}),B,R,I]}),void 0!==S&&M]})})},gt=function(){return gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gt.apply(this,arguments)},_t=function(n){var i;void 0===n&&(n=""),""===n&&(n=window.wpParselyContentHelperSettings);try{i=JSON.parse(n)}catch(n){return{CrossLinksMaxLinkWords:oe,CrossLinksMaxLinks:se,CrossLinksOpen:!1,CrossLinksSettingsOpen:!1,PerformanceDetailsOpen:!0,RelatedTopPostsFilterBy:r.Unavailable,RelatedTopPostsFilterValue:"",RelatedTopPostsOpen:!1,SettingsMetric:t.Views,SettingsOpen:!0,SettingsPeriod:e.Days7,TitleSuggestionsOpen:!1,TitleSuggestionsPersona:b.journalist.label,TitleSuggestionsSettingsOpen:!1,TitleSuggestionsTone:T.neutral.label}}return"number"!=typeof(null==i?void 0:i.CrossLinksMaxLinkWords)&&(i.CrossLinksMaxLinkWords=oe),"number"!=typeof(null==i?void 0:i.CrossLinksMaxLinks)&&(i.CrossLinksMaxLinks=se),"boolean"!=typeof(null==i?void 0:i.CrossLinksOpen)&&(i.CrossLinksOpen=!1),"boolean"!=typeof(null==i?void 0:i.CrossLinksSettingsOpen)&&(i.CrossLinksSettingsOpen=!1),"boolean"!=typeof(null==i?void 0:i.PerformanceDetailsOpen)&&(i.PerformanceDetailsOpen=!0),z(null==i?void 0:i.RelatedTopPostsFilterBy,r)||(i.RelatedTopPostsFilterBy=r.Unavailable),"string"!=typeof(null==i?void 0:i.RelatedTopPostsFilterValue)&&(i.RelatedTopPostsFilterValue=""),"boolean"!=typeof(null==i?void 0:i.RelatedTopPostsOpen)&&(i.RelatedTopPostsOpen=!1),z(null==i?void 0:i.SettingsMetric,t)||(i.SettingsMetric=t.Views),"boolean"!=typeof(null==i?void 0:i.SettingsOpen)&&(i.SettingsOpen=!0),z(null==i?void 0:i.SettingsPeriod,e)||(i.SettingsPeriod=e.Days7),"boolean"!=typeof(null==i?void 0:i.TitleSuggestionsOpen)&&(i.TitleSuggestionsOpen=!1),"string"!=typeof(null==i?void 0:i.TitleSuggestionsPersona)&&(i.TitleSuggestionsPersona=b.journalist.label),"boolean"!=typeof(null==i?void 0:i.TitleSuggestionsSettingsOpen)&&(i.TitleSuggestionsSettingsOpen=!1),"string"!=typeof(null==i?void 0:i.TitleSuggestionsTone)&&(i.TitleSuggestionsTone=T.neutral.label),i};(0,d.registerPlugin)("wp-parsely-block-editor-sidebar",{icon:D,render:function(){var n=(0,u.useState)(_t(window.wpParselyContentHelperSettings)),r=n[0],d=n[1],y=(0,u.useState)({authors:[],categories:[],tags:[]}),v=y[0],g=y[1],_=function(e,t){var n;d(gt(gt({},r),((n={})[e]=t,n)))},w=(0,a.useSelect)((function(e){var t=e(c.store).getEditedPostAttribute,n=e(o.store).getEntityRecords;return{authors:n("root","user",{include:t("author")}),categories:n("taxonomy","category",{include:t("categories")}),tags:n("taxonomy","post_tag",{include:t("tags")})}}),[]),b=w.authors,m=w.categories,x=w.tags,j=(0,u.useMemo)((function(){return x?x.map((function(e){return e.name})):[]}),[x]),S=(0,u.useMemo)((function(){return m?m.map((function(e){return e.name})):[]}),[m]),k=(0,u.useMemo)((function(){return b?b.map((function(e){return e.name})):[]}),[b]);F("editor-sidebar-settings",r),(0,u.useEffect)((function(){g({authors:k,tags:j,categories:S})}),[k,j,S]);var P=(0,a.useSelect)((function(e){return e("core/interface").getActiveComplementaryArea("core/edit-post")}),[]);(0,u.useEffect)((function(){"wp-parsely-block-editor-sidebar/wp-parsely-content-helper"===P&&f.trackEvent("editor_sidebar_opened")}),[P]);var T=function(e,t){t?f.trackEvent("editor_sidebar_panel_opened",{panel:e}):f.trackEvent("editor_sidebar_panel_closed",{panel:e})},E=function(e,t){f.trackEvent("editor_sidebar_settings_changed",gt({filter:e},t))};return(0,i.jsxs)(l.PluginSidebar,{icon:(0,i.jsx)(D,{}),name:"wp-parsely-content-helper",className:"wp-parsely-content-helper",title:(0,p.__)("Parse.ly Editor Sidebar","wp-parsely"),children:[(0,i.jsx)(s.Panel,{children:(0,i.jsx)(s.PanelBody,{title:(0,p.__)("Settings","wp-parsely"),initialOpen:r.SettingsOpen,onToggle:function(e){d(gt(gt({},r),{SettingsOpen:e})),T("settings",e)},children:(0,i.jsx)((function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.SelectControl,{label:(0,p.__)("Period","wp-parsely"),onChange:function(t){z(t,e)&&(d(gt(gt({},r),{SettingsPeriod:t})),E("period",{period:t}))},value:r.SettingsPeriod,children:Object.values(e).map((function(e){return(0,i.jsx)("option",{value:e,children:V(e)},e)}))}),(0,i.jsx)(s.SelectControl,{label:(0,p.__)("Metric","wp-parsely"),onChange:function(e){z(e,t)&&(d(gt(gt({},r),{SettingsMetric:e})),E("metric",{metric:e}))},value:r.SettingsMetric,children:Object.values(t).map((function(e){return(0,i.jsx)("option",{value:e,children:G(e)},e)}))})]})}),{})})}),(0,i.jsx)(s.Panel,{children:(0,i.jsx)(s.PanelBody,{title:(0,p.__)("Performance Details","wp-parsely"),initialOpen:r.PerformanceDetailsOpen,onToggle:function(e){d(gt(gt({},r),{PerformanceDetailsOpen:e})),T("performance_details",e)},children:(0,i.jsx)($,{children:(0,i.jsx)(Le,{period:r.SettingsPeriod})})})}),(0,i.jsx)(s.Panel,{children:(0,i.jsx)(s.PanelBody,{title:(0,p.__)("Related Top Posts","wp-parsely"),initialOpen:r.RelatedTopPostsOpen,onToggle:function(e){d(gt(gt({},r),{RelatedTopPostsOpen:e})),T("related_top_posts",e)},children:(0,i.jsx)($,{children:(0,i.jsx)(Ze,{initialFilter:{type:r.RelatedTopPostsFilterBy,value:r.RelatedTopPostsFilterValue},metric:r.SettingsMetric,onFilterChange:function(e,t){d(gt(gt({},r),{RelatedTopPostsFilterBy:e,RelatedTopPostsFilterValue:t}))},period:r.SettingsPeriod,postData:v})})})}),(0,i.jsx)(s.Panel,{children:(0,i.jsx)(s.PanelBody,{icon:(0,i.jsx)(h,{}),title:(0,p.__)("Title Suggestions","wp-parsely"),initialOpen:r.TitleSuggestionsOpen,onToggle:function(e){d(gt(gt({},r),{TitleSuggestionsOpen:e})),T("title_suggestions",e)},children:(0,i.jsx)($,{children:(0,i.jsx)(vt,{initialPersona:r.TitleSuggestionsPersona,initialSettingsOpen:r.TitleSuggestionsSettingsOpen,initialTone:r.TitleSuggestionsTone,onSettingChange:_})})})}),(0,i.jsx)(s.Panel,{children:(0,i.jsx)(s.PanelBody,{icon:(0,i.jsx)(h,{}),title:(0,p.__)("Smart Linking","wp-parsely"),initialOpen:r.CrossLinksOpen,onToggle:function(e){d(gt(gt({},r),{CrossLinksOpen:e})),T("cross_links",e)},children:(0,i.jsx)($,{children:(0,i.jsx)(ge,{context:he.ContentHelperSidebar,sidebarSettings:r,onSettingChange:_})})})})]})}}),(0,Q.addFilter)("editor.BlockEdit","my-plugin/with-inspector-controls",ae),(0,d.registerPlugin)("wp-parsely-block-overlay",{render:function(){var e=(0,a.useSelect)((function(e){return{overlayBlocks:(0,e(ee).getOverlayBlocks)()}}),[]).overlayBlocks;return(0,i.jsx)(i.Fragment,{children:e.map((function(e){return(0,i.jsx)(re,{label:(0,p.__)("Generating cross links‚Ä¶","wp-parsely"),selectedBlockClientId:e},e)}))})}})}()}();