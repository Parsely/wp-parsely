!function(){"use strict";var e={251:function(e,t,r){var n=r(196),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,s={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,n)&&!l.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},893:function(e,t,r){e.exports=r(251)},196:function(e){e.exports=window.React}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=r(893),t=window.wp.element,n=window.wp.data,a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},a.apply(this,arguments)},s={},i="wp-parsely/settings",o=(0,n.createReduxStore)(i,{initialState:s,reducer:function(e,t){var r,n;switch(void 0===e&&(e=s),t.type){case"SET_SETTINGS":return a(a({},e),((r={})[t.endpoint]=t.settings,r));case"SET_PARTIAL_SETTINGS":var i=e[t.endpoint]||{},o=a(a({},i),t.partialSettings);return a(a({},e),((n={})[t.endpoint]=o,n));default:return e}},actions:{setSettings:function(e,t){return{type:"SET_SETTINGS",endpoint:e,settings:t}},setPartialSettings:function(e,t){return{type:"SET_PARTIAL_SETTINGS",endpoint:e,partialSettings:t}}},selectors:{getSettings:function(e,t){return e[t]}}}),l=window.wp.apiFetch,c=r.n(l),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)},p=(0,t.createContext)({settings:{},setSettings:function(){console.error("WP Parse.ly: setSettings not implemented")}}),d=function(r){var a=r.children,s=r.endpoint,i=r.defaultSettings,l=(0,n.useSelect)((function(e){var t=e(o).getSettings(s);return t||(t=i,(0,n.dispatch)(o).setSettings(s,i).then((function(){}))),{storedSettings:t}}),[i,s]).storedSettings,d=(0,t.useState)(l),f=d[0],h=d[1],y=(0,n.dispatch)(o).setPartialSettings,v=(0,t.useCallback)((function(e){h((function(t){return u(u({},t),e)})),y(s,e)}),[s,y]);!function(e,r,n){var a=(0,t.useRef)(!0);(0,t.useEffect)((function(){a.current?a.current=!1:c()({path:"/wp-parsely/v1/user-meta/content-helper/"+e,method:"PUT",data:r})}),n)}(s,l,[f]);var w=(0,t.useMemo)((function(){return{settings:l,setSettings:v}}),[l,v]);return(0,e.jsx)(p.Provider,{value:w,children:a})};void 0!==(0,n.select)(i)||(0,n.register)(o);var f,h,y,v=window.wp.i18n;!function(e){e.Minutes10="10m",e.Hour="1h",e.Hours2="2h",e.Hours4="4h",e.Hours24="24h",e.Days7="7d",e.Days30="30d"}(f||(f={})),function(e){e.Views="views",e.AvgEngaged="avg_engaged"}(h||(h={})),function(e){e.Author="author",e.Section="section",e.Tag="tag",e.Unavailable="unavailable"}(y||(y={}));var w=function(e,t){return Object.values(t).includes(e)};function g(e,t){void 0===t&&(t=!1);var r=parseInt(e,10),n=e.charAt(e.length-1),a=(0,v.__)("Unknown Period","wp-parsely");switch(n){case"m":if(1===r){a=(0,v.__)("Last Minute","wp-parsely");break}a=(0,v.sprintf)(/* translators: 1: Number of minutes */(0,v._n)("Last %1$d Minute","Last %1$d Minutes",r,"wp-parsely"),r);break;case"h":if(1===r){a=(0,v.__)("Last Hour","wp-parsely");break}a=(0,v.sprintf)(/* translators: 1: Number of hours */(0,v._n)("Last %1$d Hour","Last %1$d Hours",r,"wp-parsely"),r);break;case"d":if(1===r){a=(0,v.__)("Last Day","wp-parsely");break}a=(0,v.sprintf)(/* translators: 1: Number of days */(0,v._n)("Last %1$d Day","Last %1$d Days",r,"wp-parsely"),r)}return t?a.toLocaleLowerCase():a}function _(e){switch(e){case h.Views:return(0,v.__)("Page Views","wp-parsely");case h.AvgEngaged:return(0,v.__)("Avg. Time","wp-parsely");default:return(0,v.__)("Unknown Metric","wp-parsely")}}var m,b,P=function(t){void 0===t&&(t=null);var r="";(null==t?void 0:t.children)&&(r=t.children);var n="content-helper-error-message";return(null==t?void 0:t.className)&&(n+=" "+t.className),(0,e.jsx)("div",{className:n,"data-testid":null==t?void 0:t.testId,dangerouslySetInnerHTML:{__html:r}})},x=function(t){return void 0===t&&(t=null),(0,e.jsx)(P,{className:null==t?void 0:t.className,testId:"empty-credentials-message",children:window.wpParselyEmptyCredentialsMessage})},j=function(){return j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},j.apply(this,arguments)},S=function(t,r){var n=t.children;return void 0===r&&(r=null),window.wpParselyEmptyCredentialsMessage?(0,e.jsx)(x,j({},r)):(0,e.jsx)(e.Fragment,{children:n})},E=window.wp.components,T=function(){function e(){this._tkq=[],this.isLoaded=!1,this.isEnabled=!1,"undefined"!=typeof wpParselyTracksTelemetry&&(this.isEnabled=!0,this.loadTrackingLibrary())}return e.getInstance=function(){return window.wpParselyTelemetryInstance||Object.defineProperty(window,"wpParselyTelemetryInstance",{value:new e,writable:!1,configurable:!1,enumerable:!1}),window.wpParselyTelemetryInstance},e.prototype.loadTrackingLibrary=function(){var e=this,t=document.createElement("script");t.async=!0,t.src="//stats.wp.com/w.js",t.onload=function(){e.isLoaded=!0,e._tkq=window._tkq||[]},document.head.appendChild(t)},e.trackEvent=function(t,r){return void 0===r&&(r={}),n=this,a=void 0,i=function(){var n;return function(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(a){switch(a.label){case 0:return(n=e.getInstance()).isTelemetryEnabled()?[4,e.waitUntilLoaded()]:[2];case 1:return a.sent(),n.trackEvent(t,r),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{l(i.next(e))}catch(e){t(e)}}function o(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(r,o)}l((i=i.apply(n,a||[])).next())}));var n,a,s,i},e.waitUntilLoaded=function(){return new Promise((function(t,r){var n=e.getInstance();if(n.isTelemetryEnabled())if(n.isLoaded)t();else var a=0,s=setInterval((function(){n.isLoaded&&(clearInterval(s),t()),(a+=100)>=1e4&&(clearInterval(s),r("Telemetry library not loaded"))}),100);else r("Telemetry not enabled")}))},e.prototype.trackEvent=function(t,r){var n;this.isLoaded?(0!==t.indexOf(e.TRACKS_PREFIX)&&(t=e.TRACKS_PREFIX+t),this.isEventNameValid(t)?(r=this.prepareProperties(r),null===(n=this._tkq)||void 0===n||n.push(["recordEvent",t,r])):console.error("Error tracking event: Invalid event name")):console.error("Error tracking event: Telemetry not loaded")},e.prototype.isTelemetryEnabled=function(){return this.isEnabled},e.prototype.isProprietyValid=function(t){return e.PROPERTY_REGEX.test(t)},e.prototype.isEventNameValid=function(t){return e.EVENT_NAME_REGEX.test(t)},e.prototype.prepareProperties=function(e){return(e=this.sanitizeProperties(e)).parsely_version=wpParselyTracksTelemetry.version,wpParselyTracksTelemetry.user&&(e._ut=wpParselyTracksTelemetry.user.type,e._ui=wpParselyTracksTelemetry.user.id),wpParselyTracksTelemetry.vipgo_env&&(e.vipgo_env=wpParselyTracksTelemetry.vipgo_env),this.sanitizeProperties(e)},e.prototype.sanitizeProperties=function(e){var t=this,r={};return Object.keys(e).forEach((function(n){t.isProprietyValid(n)&&(r[n]=e[n])})),r},e.TRACKS_PREFIX="wpparsely_",e.EVENT_NAME_REGEX=/^(([a-z0-9]+)_){2}([a-z0-9_]+)$/,e.PROPERTY_REGEX=/^[a-z_][a-z0-9_]*$/,e}(),N=(T.trackEvent,function(t){var r=t.defaultValue,n=t.items,a=t.onChange;return(0,e.jsx)("select",{onChange:a,value:r,children:n.map((function(t){return(0,e.jsx)("option",{value:t[0],children:t[1]},t[0])}))})}),k=window.wp.url,C=(m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},m(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});!function(e){e.CannotFormulateApiQuery="ch_cannot_formulate_api_query",e.FetchError="fetch_error",e.HttpRequestFailed="http_request_failed",e[e.ParselyApiForbidden=403]="ParselyApiForbidden",e.ParselyApiResponseContainsError="ch_response_contains_error",e.ParselyApiReturnedNoData="ch_parsely_api_returned_no_data",e.ParselyApiReturnedTooManyResults="ch_parsely_api_returned_too_many_results",e[e.ParselyApiUnauthorized=401]="ParselyApiUnauthorized",e.PluginCredentialsNotSetMessageDetected="parsely_credentials_not_set_message_detected",e.PluginSettingsApiSecretNotSet="parsely_api_secret_not_set",e.PluginSettingsSiteIdNotSet="parsely_site_id_not_set",e.PostIsNotPublished="ch_post_not_published"}(b||(b={}));var O=function(t){function r(e,n,a){void 0===a&&(a=(0,v.__)("Error: ","wp-parsely"));var s=t.call(this,a+e)||this;s.hint=null,s.name=s.constructor.name,s.code=n;var i=[b.ParselyApiForbidden,b.ParselyApiResponseContainsError,b.ParselyApiReturnedNoData,b.ParselyApiReturnedTooManyResults,b.ParselyApiUnauthorized,b.PluginCredentialsNotSetMessageDetected,b.PluginSettingsApiSecretNotSet,b.PluginSettingsSiteIdNotSet,b.PostIsNotPublished];return s.retryFetch=!i.includes(s.code),Object.setPrototypeOf(s,r.prototype),s}return C(r,t),r.prototype.Message=function(t){return void 0===t&&(t=null),[b.PluginCredentialsNotSetMessageDetected,b.PluginSettingsSiteIdNotSet,b.PluginSettingsApiSecretNotSet].includes(this.code)?x(t):(this.code===b.FetchError&&(this.hint=this.Hint((0,v.__)("This error can sometimes be caused by ad-blockers or browser tracking protections. Please add this site to any applicable allow lists and try again.","wp-parsely"))),this.code===b.ParselyApiForbidden&&(this.hint=this.Hint((0,v.__)("Please ensure that the Site ID and API Secret given in the plugin's settings are correct.","wp-parsely"))),this.code===b.HttpRequestFailed&&(this.hint=this.Hint((0,v.__)("The Parse.ly API cannot be reached. Please verify that you are online.","wp-parsely"))),this.code===b.ParselyApiUnauthorized&&(this.message=(0,v.__)("This feature is accessible to select customers participating in its beta testing.","wp-parsely")),(0,e.jsx)(P,{className:null==t?void 0:t.className,testId:"error",children:"<p>".concat(this.message,"</p>").concat(this.hint?this.hint:"")}))},r.prototype.Hint=function(e){return'<p className="content-helper-error-message-hint" data-testid="content-helper-error-message-hint"><strong>'.concat((0,v.__)("Hint:","wp-parsely"),"</strong> ").concat(e,"</p>")},r}(Error),A={month:"short",day:"numeric",year:"numeric"},I={month:"short",day:"numeric"},R=(0,v.__)("Date N/A","wp-parsely");function L(e){if(!1===function(e){return!isNaN(+e)&&0!==e.getTime()}(e))return R;var t=A;return e.getUTCFullYear()===(new Date).getUTCFullYear()&&(t=I),Intl.DateTimeFormat(document.documentElement.lang||"en",t).format(e)}var M=function(){return M=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},M.apply(this,arguments)},F=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}l((n=n.apply(e,t||[])).next())}))},V=function(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},D=function(){function e(){}return e.prototype.getTopPosts=function(e,t){return void 0===t&&(t=1),F(this,void 0,void 0,(function(){var r,n;return V(this,(function(a){switch(a.label){case 0:r=[],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.fetchTopPostsFromWpEndpoint(e,t)];case 2:return r=a.sent(),[3,4];case 3:return n=a.sent(),[2,Promise.reject(n)];case 4:return 0===r.length?[2,Promise.reject(new O((0,v.__)("No Top Posts data is available.","wp-parsely"),b.ParselyApiReturnedNoData,""))]:[2,r]}}))}))},e.prototype.fetchTopPostsFromWpEndpoint=function(e,t){var r;return F(this,void 0,void 0,(function(){var n,a;return V(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,c()({path:(0,k.addQueryArgs)("/wp-parsely/v1/stats/posts/",M(M({limit:5},(i=e.Period,{period_start:i,period_end:""})),{sort:e.Metric,page:t,itm_source:"wp-parsely-content-helper"}))})];case 1:return n=s.sent(),[3,3];case 2:return a=s.sent(),[2,Promise.reject(new O(a.message,a.code))];case 3:return(null==n?void 0:n.error)?[2,Promise.reject(new O(n.error.message,b.ParselyApiResponseContainsError))]:[2,null!==(r=null==n?void 0:n.data)&&void 0!==r?r:[]]}var i}))}))},e}(),H=function(){return(0,e.jsx)(E.SVG,{"aria-hidden":"true",version:"1.1",viewBox:"0 0 15 15",width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)(E.Path,{d:"M0 14.0025V11.0025L7.5 3.5025L10.5 6.5025L3 14.0025H0ZM12 5.0025L13.56 3.4425C14.15 2.8525 14.15 1.9025 13.56 1.3225L12.68 0.4425C12.09 -0.1475 11.14 -0.1475 10.56 0.4425L9 2.0025L12 5.0025Z"})})},U=function(){return(0,e.jsxs)(E.SVG,{"aria-hidden":"true",version:"1.1",viewBox:"0 0 16 16",width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)(E.Path,{d:"M0 3.29592C0 2.73237 0.456853 2.27551 1.02041 2.27551H4.08165C4.50432 2.27551 4.84696 2.61815 4.84696 3.04082C4.84696 3.46349 4.50432 3.80613 4.08165 3.80613H1.53062V11.9694H9.69391V9.6735C9.69391 9.25083 10.0366 8.90819 10.4592 8.90819C10.8819 8.90819 11.2245 9.25083 11.2245 9.6735V12.4796C11.2245 13.0432 10.7677 13.5 10.2041 13.5H1.02041C0.456854 13.5 0 13.0432 0 12.4796V3.29592Z"}),(0,e.jsx)(E.Path,{d:"M12.531 1.22415C12.8299 1.52303 12.8299 2.00759 12.531 2.30646L6.15342 8.68404C5.85455 8.98291 5.36998 8.98291 5.07111 8.68404C4.77224 8.38517 4.77224 7.9006 5.07111 7.60173L11.4487 1.22415C11.7476 0.925282 12.2321 0.925282 12.531 1.22415Z"}),(0,e.jsx)(E.Path,{d:"M6.63268 1.51012C6.63268 1.08745 6.97532 0.744812 7.39799 0.744812H12.2449C12.6676 0.744812 13.0103 1.08745 13.0103 1.51012V6.35708C13.0103 6.77975 12.6676 7.12239 12.2449 7.12239C11.8223 7.12239 11.4796 6.77975 11.4796 6.35708V2.27543H7.39799C6.97532 2.27543 6.63268 1.93279 6.63268 1.51012Z"})]})};function G(e,t,r){void 0===t&&(t=1),void 0===r&&(r="");var n=parseInt(e.replace(/\D/g,""),10);if(n<1e3)return e;n<1e4&&(t=1);var a=n,s=n.toString(),i="",o=0;return Object.entries({1e3:"k","1,000,000":"M","1,000,000,000":"B","1,000,000,000,000":"T","1,000,000,000,000,000":"Q"}).forEach((function(e){var r=e[0],l=e[1],c=parseInt(r.replace(/\D/g,""),10);if(n>=c){var u=t;(a=n/c)%1>1/o&&(u=a>10?1:2),u=parseFloat(a.toFixed(2))===parseFloat(a.toFixed(0))?0:u,s=a.toFixed(u),i=l}o=c})),s+r+i}function z(t){var r=t.metric,n=t.post,a=t.avgEngagedIcon,s=t.viewsIcon;return"views"===r?(0,e.jsxs)("span",{className:"parsely-top-post-metric-data",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Number of Views","wp-parsely")}),s,G(n.views.toString())]}):"avg_engaged"===r?(0,e.jsxs)("span",{className:"parsely-top-post-metric-data",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Average Time","wp-parsely")}),a,n.avgEngaged]}):(0,e.jsx)("span",{className:"parsely-top-post-metric-data",children:"-"})}function $(t){var r,n=t.metric,a=t.post;return(0,e.jsx)("li",{className:"parsely-top-post",children:(0,e.jsxs)("div",{className:"parsely-top-post-content",children:[(0,e.jsx)(q,{post:a}),(0,e.jsxs)("div",{className:"parsely-top-post-data",children:[(0,e.jsx)(z,{metric:n,post:a}),(0,e.jsx)(X,{post:a}),(0,e.jsxs)("a",{className:"parsely-top-post-icon-link",href:a.url,target:"_blank",rel:"noreferrer",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("View Post (opens in new tab)","wp-parsely")}),(0,e.jsx)(U,{})]}),0!==a.postId&&(0,e.jsxs)("a",{className:"parsely-top-post-icon-link",href:(r=a.postId,"/wp-admin/post.php?post=".concat(r,"&action=edit")),target:"_blank",rel:"noreferrer",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Edit Post (opens in new tab)","wp-parsely")}),(0,e.jsx)(H,{})]}),(0,e.jsxs)("div",{className:"parsely-top-post-metadata",children:[(0,e.jsxs)("span",{className:"parsely-top-post-date",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Date","wp-parsely")}),L(new Date(a.date))]}),(0,e.jsxs)("span",{className:"parsely-top-post-author",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Author","wp-parsely")}),a.author]})]})]})]})},a.id)}function q(t){var r=t.post;return r.thumbnailUrl?(0,e.jsxs)("div",{className:"parsely-top-post-thumbnail",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Thumbnail","wp-parsely")}),(0,e.jsx)("img",{src:r.thumbnailUrl,alt:(0,v.__)("Post thumbnail","wp-parsely")})]}):(0,e.jsx)("div",{className:"parsely-top-post-thumbnail",children:(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Post thumbnail not available","wp-parsely")})})}function X(t){var r=t.post;return(0,e.jsxs)("a",{className:"parsely-top-post-title",href:r.dashUrl,target:"_blank",rel:"noreferrer",children:[(0,e.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("View in Parse.ly (opens in new tab)","wp-parsely")}),r.title]})}var Y=function(){return Y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Y.apply(this,arguments)},Z=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}l((n=n.apply(e,t||[])).next())}))},B=function(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};function W(){var r=this,n=function(){var e=(0,t.useContext)(p);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e}(),a=n.settings,s=n.setSettings,i=(0,t.useState)(!0),o=i[0],l=i[1],c=(0,t.useState)(),u=c[0],d=c[1],y=(0,t.useState)([]),m=y[0],b=y[1],P=(0,t.useState)(1),x=P[0],j=P[1];(0,t.useEffect)((function(){var e=new D,t=function(n){return Z(r,void 0,void 0,(function(){var r=this;return B(this,(function(s){return e.getTopPosts(a,x).then((function(e){b(e),l(!1)})).catch((function(e){return Z(r,void 0,void 0,(function(){return B(this,(function(r){switch(r.label){case 0:return n>0&&e.retryFetch?[4,new Promise((function(e){return setTimeout(e,500)}))]:[3,3];case 1:return r.sent(),[4,t(n-1)];case 2:return r.sent(),[3,4];case 3:l(!1),d(e),r.label=4;case 4:return[2]}}))}))})),[2]}))}))};return l(!0),t(1),function(){l(!1),b([]),d(void 0)}}),[a,x]);var S=function(e,t){T.trackEvent("dash_widget_filter_changed",Y({filter:e},t))},k=(0,e.jsxs)("div",{className:"parsely-top-posts-filters",children:[(0,e.jsx)(N,{defaultValue:a.Period,items:Object.values(f).map((function(e){return[e,g(e)]})),onChange:function(e){w(e.target.value,f)&&(s({Period:e.target.value}),S("period",{period:e.target.value}),j(1))}}),(0,e.jsx)(N,{defaultValue:a.Metric,items:Object.values(h).map((function(e){return[e,_(e)]})),onChange:function(e){w(e.target.value,h)&&(s({Metric:e.target.value}),S("metric",{metric:e.target.value}),j(1))}})]}),C=(0,e.jsxs)("div",{className:"parsely-top-posts-navigation",children:[(0,e.jsx)("button",{className:"parsely-top-posts-navigation-prev",disabled:x<=1,"aria-label":(0,v.__)("Previous page","wp-parsely"),onClick:function(){j(x-1),T.trackEvent("dash_widget_navigation",{navigation:"previous",to_page:x-1})},children:(0,v.__)("<< Previous","wp-parsely")}),(0,v.sprintf)(/* translators: 1: Current page */(0,v.__)("Page %1$d","wp-parsely"),x),(0,e.jsx)("button",{className:"parsely-top-posts-navigation-next",disabled:!o&&m.length<5,"aria-label":(0,v.__)("Next page","wp-parsely"),onClick:function(){j(x+1),T.trackEvent("dash_widget_navigation",{navigation:"next",to_page:x+1})},children:(0,v.__)("Next >>","wp-parsely")})]});if(u)return(0,e.jsxs)(e.Fragment,{children:[k,u.Message(),x>1&&C]});var O=(0,e.jsx)("div",{className:"parsely-spinner-wrapper",children:(0,e.jsx)(E.Spinner,{})});return(0,e.jsxs)(e.Fragment,{children:[k,o?O:(0,e.jsx)("ol",{className:"parsely-top-posts",style:{counterReset:"item "+5*(x-1)},children:m.map((function(t){return(0,e.jsx)($,{metric:a.Metric,post:t},t.id)}))}),(m.length>=5||x>1)&&C]})}var K=function(e){var t;try{t=JSON.parse(e)}catch(e){return{Metric:h.Views,Period:f.Days7}}return w(null==t?void 0:t.Metric,h)||(t.Metric=h.Views),w(null==t?void 0:t.Period,f)||(t.Period=f.Days7),t};window.addEventListener("load",(function(){var r=document.querySelector("#wp-parsely-dashboard-widget > .inside");if(null!==r){var n=(0,e.jsx)(d,{endpoint:"dashboard-widget-settings",defaultSettings:K(window.wpParselyContentHelperSettings),children:(0,e.jsx)(S,{children:(0,e.jsx)(W,{})})});t.createRoot?(0,t.createRoot)(r).render(n):(0,t.render)(n,r)}}),!1)}()}();