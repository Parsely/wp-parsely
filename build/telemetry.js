!function(){"use strict";var e=window.wp.element,t=window.wp.data,n=function(){return(0,e.useEffect)((function(){var e=function(){return(0,t.select)("core/block-editor").getBlocks()},n=new Set(e().map((function(e){return e.clientId}))),r=(0,t.subscribe)((function(){var t=e(),r=new Set(t.map((function(e){return e.clientId})));if(r.size!==n.size)for(var o=r.size>n.size,i=0,a=o?t:Array.from(n);i<a.length;i++){var l=a[i];if(o){var s=l;s.name.startsWith("wp-parsely/")&&!n.has(s.clientId)&&console.log("Block added:",s.clientId)}else{var c=l;r.has(c)||console.log("Block removed:",c)}}n=r}));return function(){r()}}),[]),null},r=window.wp.plugins,o=function(){function t(){this._tkq=[],this.isLoaded=!1,this.loadTrackingLibrary(),console.log("Telemetry loaded")}return t.getInstance=function(){return window.wpParselyTelemetryInstance||Object.defineProperty(window,"wpParselyTelemetryInstance",{value:new t,writable:!1,configurable:!1,enumerable:!1}),window.wpParselyTelemetryInstance},t.prototype.loadTrackingLibrary=function(){var e=this,t=document.createElement("script");t.async=!0,t.src="//stats.wp.com/w.js",t.onload=function(){e.isLoaded=!0,e._tkq=window._tkq||[]},document.head.appendChild(t)},t.prototype.setupEvents=function(){var t=(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n));(0,r.registerPlugin)("wp-parsely-tracks-js-events",{render:function(){return t}})},t.trackEvent=function(e,n){return void 0===n&&(n={}),r=this,o=void 0,a=function(){var r;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){a.label=l[1];break}if(6===l[0]&&a.label<o[1]){a.label=o[1],o=l;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(l);break}o[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(o){switch(o.label){case 0:return r=t.getInstance(),[4,t.waitUntilLoaded()];case 1:return o.sent(),r.trackEvent(e,n),[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{s(a.next(e))}catch(e){t(e)}}function l(e){try{s(a.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,l)}s((a=a.apply(r,o||[])).next())}));var r,o,i,a},t.waitUntilLoaded=function(){return new Promise((function(e,n){var r=t.getInstance();if(r.isLoaded)e();else var o=0,i=setInterval((function(){r.isLoaded&&(clearInterval(i),e()),(o+=100)>=1e4&&(clearInterval(i),n("Telemetry library not loaded"))}),100)}))},t.prototype.trackEvent=function(e,n){var r;this.isLoaded?(0!==e.indexOf(t.TRACKS_PREFIX)&&(e=t.TRACKS_PREFIX+e),this.isEventNameValid(e)?(n=this.prepareProperties(n),null===(r=this._tkq)||void 0===r||r.push(["recordEvent",e,n])):console.error("Error tracking event: Invalid event name")):console.error("Error tracking event: Telemetry not loaded")},t.prototype.isProprietyValid=function(e){return t.PROPERTY_REGEX.test(e)},t.prototype.isEventNameValid=function(e){return t.EVENT_NAME_REGEX.test(e)},t.prototype.prepareProperties=function(e){return(e=this.sanitizeProperties(e)).parsely_version=window.wpParselyTracksTelemetry.version,window.wpParselyTracksTelemetry.user&&(e._ut=window.wpParselyTracksTelemetry.user.type,e._ui=window.wpParselyTracksTelemetry.user.id),this.sanitizeProperties(e)},t.prototype.sanitizeProperties=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){t.isProprietyValid(r)&&(n[r]=e[r])})),n},t.TRACKS_PREFIX="wpparsely_",t.EVENT_NAME_REGEX=/^(([a-z0-9]+)_){2}([a-z0-9_]+)$/,t.PROPERTY_REGEX=/^[a-z_][a-z0-9_]*$/,t}();o.getInstance();var i=[n],a=e.createElement.apply(void 0,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([e.Fragment,null],i.map((function(t){return(0,e.createElement)(t)})),!1));(0,r.registerPlugin)("wp-parsely-tracks-js-events",{render:function(){return a}})}();